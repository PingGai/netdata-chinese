try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="15d72b2c-3292-4464-929e-0adaea8d3354",e._sentryDebugIdIdentifier="sentry-dbid-15d72b2c-3292-4464-929e-0adaea8d3354")}catch(e){}("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{}).SENTRY_RELEASE={id:"6f1faf434b0a85eb183c91391b598f364a828f27"};(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[2904],{12709:(e,t,n)=>{n.d(t,{A:()=>u});n(96540);var s=n(33185),a=n(65258),o=n(79748),i=n(30005),l=n(92318),r=n(74848);const d=s.default.ol.withConfig({displayName:"markdocSchema__OrderedList",componentId:"sc-1maymd4-0"})(["list-style:roman;padding-left:16px;"]),c=s.default.ul.withConfig({displayName:"markdocSchema__UnorderedList",componentId:"sc-1maymd4-1"})(['list-style-image:url("','/img/list-style-image.svg");font-size:12px;padding-left:16px;'],l.A.assetsBaseURL),u={heading:{render:e=>{let{level:t=1,...n}=e,s=a.H1;switch(t){case 2:s=a.H2;break;case 3:s=a.H3;break;case 4:s=a.H4;break;case 5:s=a.H5;break;case 6:s=a.H6}return(0,r.jsx)(s,{margin:[2,0],...n})},attributes:{id:{type:String},level:{type:Number}}},paragraph:{render:e=>{let{children:t,...n}=e;return(0,r.jsx)(a.Flex,{padding:[2,0],...n,children:(0,r.jsx)(a.Text,{children:t})})}},link:{render:e=>{let{children:t,href:n,...s}=e;return(0,r.jsx)(o.A,{href:n,rel:"noopener noreferrer",target:"_blank",...s,children:t})},attributes:{href:{type:String}}},code:{render:e=>{let{content:t,...n}=e;return(0,r.jsx)(i.R0,{...n,children:t})},attributes:{content:{type:String}}},fence:{render:e=>{let{content:t,...n}=e;return(0,r.jsx)(i.Ay,{...n,children:t})},attributes:{content:{type:String}}},list:{render:e=>{let{ordered:t,children:n,...s}=e;const a=t?d:c;return(0,r.jsx)(a,{...s,children:n})},attributes:{ordered:{type:Boolean}}}}},82904:(e,t,n)=>{n.r(t),n.d(t,{AssistantAlerts:()=>U,AssistantChat:()=>pe});var s=n(96540),a=n(19186),o=n(5419),i=n(65258),l=n(73700),r=(n(98992),n(72577),n(8872),n(54852)),d=n(24013),c=n(14681),u=n(74848);const x=e=>{let{label:t,value:n}=e;return(0,u.jsxs)(i.Flex,{gap:2,children:[(0,u.jsxs)(i.Text,{strong:!0,children:[t,":"]}),(0,u.jsx)(i.Text,{children:n})]})},h=e=>{let{id:t,name:n,nodeId:s,chartId:l,alertOptions:r}=e;const h=(0,a.ID)(),[,p]=(0,o.bg)(),m=(0,d.xY)(s,"name"),g=(0,d.d3)(s,{alertId:t});return(0,u.jsxs)(i.Flex,{column:!0,children:[r.length>1&&(0,u.jsx)(i.Box,{margin:[0,0,2,0],children:(0,u.jsx)(i.Select,{"data-testid":`${n}-assistant-modal-alerts-select`,onChange:e=>{let{value:t}=e;return p({roomId:h,alert:{name:t}})},styles:{size:"tiny"},menuPlacement:"auto",options:r,value:{value:n,label:n}})}),1==r.length&&(0,u.jsx)(x,{label:"Alert",value:n}),m&&(0,u.jsx)(x,{label:"Node",value:(0,u.jsx)(c.A,{nodeId:s,extraKey:"alerts",onClick:g,children:m})}),l&&(0,u.jsx)(x,{label:"Chart id",value:l})]})};var p=n(77148),m=n(12709);const g=e=>{let{selectedAlert:t}=e;const[n]=(0,o.Ws)(),{id:s,name:a,nodeId:l,chartId:d}=t,{loaded:c,value:x,hasError:g}=(0,o.vQ)({alert:a,node:l,chart:d}),b=(e=>e.reduce(((e,t)=>{const n={value:t.name,label:t.name};return e.find((e=>{let{label:t}=e;return t==n.label}))||e.push(n),e}),[]))(n);return c?g?(0,u.jsx)(i.Text,{children:"Something went wrong"}):x?.result?(0,u.jsxs)(i.Flex,{column:!0,gap:3,children:[(0,u.jsx)(h,{id:s,name:a,nodeId:l,chartId:d,alertOptions:b}),(0,u.jsx)(p.A,{}),(0,u.jsx)(r.A,{transformConfiguration:{nodes:m.A},children:x.result})]}):(0,u.jsx)(i.Text,{children:"No data"}):(0,u.jsx)(i.Text,{children:"Loading..."})};var b=n(75894),j=n(73613),f=n(33185);const y=(0,f.default)(i.Flex).withConfig({displayName:"styled__ElevatedContent",componentId:"sc-16kc0pw-0"})(["box-shadow:0 18px 28px rgba(0,0,0,0.5);"]),w=(0,f.default)(i.Icon).withConfig({displayName:"styled__IconAbsolute",componentId:"sc-16kc0pw-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]),v=e=>{let{alert:t,...n}=e;return(0,u.jsx)(j.A,{content:"Show assistant",children:(0,u.jsx)(y,{position:"absolute",top:"0",right:"0",cursor:"pointer",...n,children:(0,u.jsx)(b.A,{flavour:t?.status||"neutral",children:t?.name})})})};var C=n(43375),k=n(6304);const I=f.default.ul.withConfig({displayName:"helpTooltipContent__List",componentId:"sc-uh9315-0"})(["width:350px;padding-left:16px;list-style:disc outside none;"]),A=function(){let{disableDrag:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.jsxs)(I,{children:[e?null:(0,u.jsx)("li",{children:"You can drag around the assistant window and navigate to other tabs within the same room, and the assistant window won't go away."}),(0,u.jsx)("li",{children:"Use the buttons at the right to expand, or minimize the assistant window."}),(0,u.jsxs)("li",{children:["Hold down the ",(0,u.jsx)(i.TextSmall,{strong:!0,children:"Shift"})," button in order to select any text inside the assistant window."]})]})};var M=n(63950),_=n.n(M);const S=e=>{let{onModalClose:t=_()}=e;return(0,u.jsx)(j.A,{content:"Close assistant",children:(0,u.jsx)(y,{position:"absolute",bottom:"37px",right:"-10px",background:"mainBackground",sx:{borderRadius:"100%"},border:{side:"all",color:"primary",size:"1px",type:"solid"},width:"28px",height:"28px",onClick:t,cursor:"pointer",children:(0,u.jsx)(w,{name:"x",color:"text",size:"sm"})})})},B=e=>{let{onClick:t=_()}=e;return(0,u.jsx)(y,{position:"absolute",top:"0",right:"0",onClick:t,cursor:"pointer",children:(0,u.jsx)(i.Pill,{flavour:"neutral",children:"Show assistant"})})},F=e=>{let{MaximizeComponent:t=B,isMinimized:n,maximize:a=_(),onModalClose:o=_()}=e;const[l,r]=(0,s.useState)(!1);return(0,u.jsxs)(i.Flex,{position:"relative",width:"56px",height:n?"95px":"56px",onMouseEnter:()=>r(n),onMouseLeave:()=>r(!1),children:[(0,u.jsx)(y,{position:"absolute",bottom:"0",background:"primary",sx:{borderRadius:"100%"},width:"56px",height:"56px",cursor:"move",children:(0,u.jsx)(w,{name:"netdataAssistant",size:"large"})}),l&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t,{onClick:()=>{n&&a()}}),(0,u.jsx)(S,{onModalClose:o})]})]})};var N=n(10444);const z=e=>{let{expanded:t,isMobile:n}=e;return n?{base:"95vw"}:t?{base:"80vw"}:{base:150,max:150,min:70}},T=e=>{let{expanded:t,isMobile:n}=e;return n?{base:"80vh",max:"80vh",min:"10vh"}:t?{base:"80vh",min:"80vh"}:{base:150,max:150,min:150}},H=(0,f.default)(i.ModalContent).attrs((e=>{let{expanded:t,isMobile:n,getWidth:s,getHeight:a,...o}=e;return{width:s({expanded:t,isMobile:n}),height:a({expanded:t,isMobile:n}),padding:[0,0,4,0],...o}})).withConfig({displayName:"assistantModalBase__ModalContent",componentId:"sc-15vyjlc-0"})([""]),D=(0,f.default)(i.ModalBody).withConfig({displayName:"assistantModalBase__StyledModalBody",componentId:"sc-15vyjlc-1"})(["flex-direction:",";"],(e=>{let{columnReverse:t}=e;return t?"column-reverse":"column"})),R=e=>{let{children:t,disabled:n,position:s}=e;const{attributes:a,listeners:o,setNodeRef:i,transform:l}=(0,C.PM)({id:"assistant-modal",disabled:n}),r={transform:`translate3d(${s.x+(l?.x||0)}px, ${s.y+(l?.y||0)}px, 0)`,touchAction:"none"};return(0,u.jsx)("div",{ref:i,style:r,children:"function"===typeof t?t({listeners:o,attributes:a}):t})},E=function(){let{title:e,body:t,modalContentProps:n={},modalBodyProps:a={},onClose:o,MaximizeComponent:l,disableDrag:r,getWidth:d=z,getHeight:c=T}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[x,h]=(0,k.A)(),[p,m]=(0,s.useState)(!1),[g,b,,f]=(0,k.A)(),y=(0,N.J)(),[w,v]=(0,s.useState)({x:0,y:0}),I=e=>{let{key:t}=e;"Shift"===t&&m(!0)},M=()=>m(!1);return(0,u.jsx)(i.Modal,{zIndex:80,backdrop:!1,children:(0,u.jsx)(C.Mp,{onDragEnd:e=>{let{delta:t}=e;v((e=>({x:e.x+t.x,y:e.y+t.y})))},children:(0,u.jsx)(R,{disabled:r||p||y,position:w,children:s=>{let{listeners:m,attributes:w}=s;return(0,u.jsxs)(i.Flex,{column:!0,alignItems:"end",gap:3,children:[!g&&(0,u.jsxs)(H,{expanded:x,tabIndex:0,onKeyDown:I,onKeyUp:M,isMobile:y,getWidth:d,getHeight:c,...n,children:[(0,u.jsxs)(i.ModalHeader,{justifyContent:"between",children:[(0,u.jsx)("div",{...m,...w,style:{cursor:p?"text":"move"},children:(0,u.jsxs)(i.Flex,{gap:2,alignItems:"center",children:[(0,u.jsx)(i.Icon,{name:"netdataAssistant",color:"text"}),e||(0,u.jsx)(i.H4,{children:"Netdata Assistant"}),(0,u.jsx)(j.A,{plain:!0,isBasic:!0,align:"top",content:(0,u.jsx)(A,{disableDrag:r}),children:(0,u.jsx)(i.Flex,{children:(0,u.jsx)(i.Icon,{name:"question",color:"textLite",width:"16px",height:"16px"})})})]})}),(0,u.jsxs)(i.Flex,{alignItems:"baseline",children:[!y&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.ModalButton,{iconName:"minimize_s",onClick:b,tooltip:"Minimize window",testId:"assistant-modal-minimize-button"}),(0,u.jsx)(i.ModalButton,{iconName:x?"reduceSize":"fullScreen",onClick:h,tooltip:x?"Reduce window size":"Expand window",testId:"assistant-modal-expand-collapse-button"})]}),(0,u.jsx)(i.ModalCloseButton,{onClose:o,position:"unset",tooltip:"Close window",testId:"assistant-modal-close-button"})]})]}),(0,u.jsx)(D,{overflow:{vertical:"auto"},cursor:p?"text":"default",...a,children:t})]}),(0,u.jsx)(F,{MaximizeComponent:l,isMinimized:g,maximize:f,onModalClose:o})]})}})})})},L=e=>{let{alertNameInHeader:t,selectedAlert:n}=e;return t?(0,u.jsx)(b.A,{flavour:n?.status||"neutral",children:n?.name}):(0,u.jsx)(i.H4,{children:"Netdata Assistant"})},q=(P=E,e=>{const[t,n]=(0,s.useState)(!1),[a,i]=(0,o.bg)(),r=a?.alert||{},d=(0,l.s)(300,(e=>{let{target:t}=e;return n(t.scrollTop>150&&!!r?.name)})),c=(0,s.useCallback)((()=>i(null)),[i]);return(0,u.jsx)(P,{title:(0,u.jsx)(L,{alertNameInHeader:t,selectedAlert:r}),body:(0,u.jsx)(g,{selectedAlert:r}),onClose:c,modalBodyProps:{onScroll:d},MaximizeComponent:e=>(0,u.jsx)(v,{alert:r,...e}),...e})});var P;const W=q,U=()=>{const e=(0,a.ID)(),[t,n]=(0,o.bg)(),{roomId:i,alert:l}=t||{};return(0,s.useEffect)((()=>{i!=e&&n(null)}),[i,e]),l&&i==e?(0,u.jsx)(W,{}):null};var K=n(46587),Q=n(6084);const Y=()=>(0,u.jsx)(i.Flex,{width:12,children:(0,u.jsx)(i.Icon,{name:"netdataAssistant",width:"48px",height:"48px",color:"primary"})}),$=e=>{let{flavour:t="assistant",children:n,...s}=e;const a="assistant"==t,o=(0,K.uW)("avatarURL"),l={...a?{background:"modalBackground"}:{},border:{side:"top",color:"primary"}};return(0,u.jsxs)(i.Flex,{gap:2,padding:[4],...l,...s,children:[a?(0,u.jsx)(Y,{}):(0,u.jsx)(Q.A,{src:o||"",width:12,height:12}),(0,u.jsx)(i.Flex,{flex:{grow:1,shrink:1},children:n})]})};var G=n(3319);const O=e=>{let{text:t}=e;const{sendButtonClickedLog:n}=(0,G.A)(),a=(0,o.ZV)(),l=(0,s.useCallback)((()=>{a(t),n({feature:"NetdataAssistantQuestion",question:t,kickstartQuestion:!0})}),[a,n]);return(0,u.jsxs)(i.Flex,{alignItems:"center",justifyContent:"between",padding:[2],background:"inputBg",round:!0,cursor:"pointer",onClick:l,children:[(0,u.jsx)(i.TextBig,{children:t}),(0,u.jsx)(i.Icon,{name:"chevron_right_s",color:"text",height:"12px",cursor:"pointer"})]})},J=()=>(0,u.jsxs)(i.Flex,{column:!0,gap:4,children:[(0,u.jsx)(i.TextBig,{children:"Hello! Welcome to Netdata Assistant! Here are some options to help you kickstart our conversation:"}),(0,u.jsxs)(i.Flex,{column:!0,gap:2,children:[(0,u.jsx)(O,{text:"What is a node?"}),(0,u.jsx)(O,{text:"What is a Netdata parent?"})]}),(0,u.jsx)(i.TextBig,{children:"Just select the option you're interested in, or feel free to ask anything else!"})]}),V=()=>(0,u.jsx)($,{border:"none",children:(0,u.jsx)(J,{})});n(81454);var Z=n(79748);const X=(0,n(3203).A)(i.Button),ee=e=>{let{question:t,answer:n,feedback:s,setFeedback:a,flavour:o}=e;return(0,u.jsx)(X,{feature:"AssistantAnswerFeedback",payload:{question:t,answer:n,feedback:o},flavour:s===o?"hollow":"borderless",icon:"thumbsUp"==o?"thumb_up":"thumb_down",onClick:()=>a(o),"data-testid":`assistant-chat-${o}`,small:!0})},te=function(){let{id:e,questionId:t,additionalInfo:n,messages:a=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[o,l]=(0,s.useState)(),r=a.find((e=>e.id==t))?.value,d=a.find((t=>t.id==e))?.value,c=(0,s.useMemo)((()=>({feedback:o,setFeedback:l,question:r,answer:d})),[o,l]);return(0,u.jsxs)(i.Flex,{alignItems:"center",justifyContent:"between",children:[(0,u.jsxs)(i.Flex,{children:[(0,u.jsx)(ee,{...c,flavour:"thumbsUp"}),(0,u.jsx)(ee,{...c,flavour:"thumbsDown"})]}),n?(0,u.jsx)(Z.A,{Component:i.Text,href:n,target:"_blank",rel:"noopener noreferrer",children:"Read more..."}):null]})};var ne=n(60908);const se=()=>(0,u.jsx)(ne.DL,{feature:"NetdataAssistantAnswer",children:(0,u.jsx)(i.TextBig,{children:"Something went wrong. Please try again."})}),ae=()=>{const{messages:e}=(0,o.Gp)();return e.map((t=>{let{id:n,questionId:s,type:a,pending:o,value:l,additionalInfo:d,error:c}=t;return(0,u.jsx)($,{flavour:"answer"==a?"assistant":"user",children:"answer"==a?o?"...":c?(0,u.jsx)(se,{}):(0,u.jsxs)(i.Flex,{column:!0,gap:1,children:[(0,u.jsx)(r.A,{transformConfiguration:{nodes:m.A},children:l}),(0,u.jsx)(te,{id:n,questionId:s,additionalInfo:d,messages:e})]}):l},n)}))},oe=(0,f.default)(i.Icon).withConfig({displayName:"input__StyledIcon",componentId:"sc-m4unkx-0"})(["opacity:",";"],(e=>{let{disabled:t}=e;return t?".5":"1"})),ie=e=>(0,u.jsx)(j.A,{plain:!0,content:"Send your message",children:(0,u.jsx)(i.Box,{children:(0,u.jsx)(oe,{name:"chevron_right_s",color:"text",size:"small",cursor:"pointer",...e})})}),le=(0,f.default)(i.Box).withConfig({displayName:"input__InputContainer",componentId:"sc-m4unkx-1"})(["box-shadow:0 0 8px rgba(0,0,0,0.5);"]),re=()=>{const{sendButtonClickedLog:e}=(0,G.A)(),[t,n]=(0,s.useState)(""),{pending:a}=(0,o.Gp)(),l=(0,o.ZV)(),r=(0,s.useCallback)((()=>{!a&&t&&(l(t),n(""),e({feature:"NetdataAssistantQuestion",question:t}))}),[a,t,l,n,e]);return(0,u.jsx)(le,{width:"100%",position:"fixed",bottom:"68px",padding:[4],background:"modalBackground",children:(0,u.jsx)(i.TextInput,{value:t,placeholder:"Message assistant...",iconRight:a?null:(0,u.jsx)(ie,{onClick:r,disabled:a||!t}),onChange:e=>{let{target:{value:t}}=e;return n(t)},onKeyDown:e=>{let{key:t}=e;"Enter"==t&&r()},autoFocus:"autofocus",disabled:a})})},de=()=>(0,u.jsxs)(i.Flex,{column:!0,children:[(0,u.jsxs)(i.Flex,{column:!0,padding:[0,0,17,0],children:[(0,u.jsx)(V,{}),(0,u.jsx)(ae,{})]}),(0,u.jsx)(re,{})]}),ce=e=>{let{expanded:t,isMobile:n}=e;return n?{base:"95vw"}:t?{base:"60vw"}:{base:125,max:150,min:60}},ue=e=>{let{expanded:t,isMobile:n}=e;return n?{base:"80vh",max:"80vh",min:"10vh"}:t?{base:"80vh",min:"80vh"}:{base:80,max:150,min:80}},xe=(e=>t=>(0,u.jsx)(ne.Ay,{feature:"NetdataAssistant",children:(0,u.jsx)(e,{body:(0,u.jsx)(de,{}),modalContentProps:{padding:[0]},modalBodyProps:{height:"100%",padding:[0],columnReverse:!0},getWidth:ce,getHeight:ue,...t})}))(E),he=xe,pe=()=>{const[e,,t]=(0,o.MY)(),{clear:n}=(0,o.Gp)(),a=(0,s.useCallback)((()=>{t(),n()}),[t,n]);return e?(0,u.jsx)(he,{onClose:a}):null}}}]);