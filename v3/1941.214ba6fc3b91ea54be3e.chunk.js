try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="431ead43-ba26-421e-b1d5-ea574771bd50",e._sentryDebugIdIdentifier="sentry-dbid-431ead43-ba26-421e-b1d5-ea574771bd50")}catch(e){}("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{}).SENTRY_RELEASE={id:"6f1faf434b0a85eb183c91391b598f364a828f27"};(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[1941],{7414:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});n(98992),n(54520),n(81454);var o=n(96540),r=n(67012),l=n(87083),s=n(24013),i=n(85720),a=n(6304),d=n(10444),c=n(23459),u=n(71341),h=n(23226),x=n(96184),f=n(69706),g=n(33185),p=n(65258),m=n(67462),v=n(63950),b=n.n(v),j=n(63589),w=n(3319),y=n(74848);const A=e=>{let{startAddingNodes:t=b(),close:n=b(),children:r}=e;const[s,i]=(0,l.Oj)({merge:!1}),{sendLog:a}=(0,w.A)(),d=(0,o.useCallback)((()=>i([])),[i]),c=(0,o.useCallback)((()=>{n(),t(),a({feature:"NodesFilterAddNodes"})}),[n,t,a]);return(0,y.jsxs)(p.Flex,{column:!0,gap:1,padding:[2,2,1],zIndex:1,border:{side:"top",color:"border"},children:[(0,y.jsxs)(p.Flex,{gap:2,justifyContent:"end",children:[(0,y.jsx)(p.Button,{label:"Clear selected",flavour:"borderless",small:!0,disabled:!s.length,onClick:d}),(0,y.jsx)(j.A,{icon:"nodes_hollow",flavour:"hollow",onClick:c,small:!0,label:"Add Nodes"})]}),r]})};var C=n(67782),k=n(38800),F=n(98383),T=n(24609),I=n(51262),N=n(38773),L=n(95565);const S=e=>{let{onAnchorClick:t}=e;const n=(0,T.dg)(),{loaded:o,hasLimitations:r,maxNodes:l}=(0,I.A)();return o&&r?(0,y.jsxs)(p.Flex,{gap:2,padding:[3],children:[(0,y.jsx)(p.Icon,{name:"warning_triangle",size:"small",color:"warning"}),n?(0,y.jsxs)(p.Text,{children:["Local dashboard is limited to ",l," nodes."," ",(0,y.jsx)(N.A,{onClick:t,children:(0,y.jsx)(p.Text,{color:"primary",children:"Review your Space active Nodes"})})]}):(0,y.jsxs)(p.Text,{children:["Your plan is limited to ",l," nodes."," ",(0,y.jsx)(L.A,{onClick:t,children:(0,y.jsx)(p.Text,{color:"primary",children:"Upgrade for no limitations"})})," ","or"," ",(0,y.jsx)(N.A,{onClick:t,children:(0,y.jsx)(p.Text,{color:"primary",children:"review your Space active Nodes"})}),"."]})]}):null},_=e=>{let{onAnchorClick:t=b()}=e;return(0,y.jsx)(S,{onAnchorClick:t})},B=["filters"],D=(0,g.default)(p.Drop).attrs({backdrop:!0,align:{top:"bottom",right:"right"},animation:!0,background:"modalBackground",column:!0,margin:[2,0,0],padding:[2,0],round:4,width:200}).withConfig({displayName:"dropdown__Dropdown",componentId:"sc-1birv08-0"})([""]),$=(0,o.memo)((e=>{let{target:t,onClose:n,onAddNodes:r}=e;const s=(0,l.w7)(),[,i]=(0,h.A)();return(0,o.useEffect)((()=>{i()}),[]),(0,y.jsx)(D,{target:t,onEsc:n,onClickOutside:n,children:(0,y.jsxs)(p.Flex,{column:!0,height:{max:"60vh"},children:[(0,y.jsxs)(p.Flex,{flex:"1",overflow:"hidden",children:[(0,y.jsxs)(p.Flex,{column:!0,flex:!0,children:[(0,y.jsx)(p.Flex,{alignItems:"center",padding:[3],border:{side:"bottom",color:"border"},height:12,flex:!1,children:(0,y.jsxs)(p.Text,{strong:!0,children:["Visualizing data in space from ",s.length||"all"," ",(0,m.su)(s.length)]})}),(0,y.jsx)(_,{onAnchorClick:n}),(0,y.jsx)(k.A,{testIdPrefix:"node-ids",param:"selectedNodeIds",groupProps:{collapsible:!1,background:"modalBackground",padding:[3],flex:"1",overflow:"hidden"},height:"auto",width:"100%"})]}),(0,y.jsx)(C.Ay,{basis:60,baseWidth:60,flex:!1,title:"Dynamic filters",help:"Filter your nodes for this page. Count next to each item refer to the number of nodes that will be selected and used across the page.",includedTabs:B,loaded:!0,onClose:n,groupProps:{background:"modalBackground"},background:"modalBackground",viewFlavour:"nodesDropdown",inModal:!0})]}),(0,y.jsx)(A,{startAddingNodes:r,close:n,children:(0,y.jsx)(F.A,{})})]})})})),O=(0,o.memo)((()=>{const e=(0,d.J)(),[t,n,,g]=(0,a.A)(!1),p=(0,o.useRef)(),m=(0,l.w7)(),v=(0,s.BU)().length,b=(0,s.Ig)().length,j=(0,s.GE)().length,w=(0,s.no)().length,A=(0,s.BU)(m.length?m:void 0).length,C=(0,s.Ig)(m.length?m:void 0).length,k=(0,s.GE)(m.length?m:void 0).length,F=(0,s.no)(m.length?m:void 0).length,T=(0,o.useMemo)((()=>({live:{selected:A,total:v,statusText:"Live"},stale:{selected:C,total:b,statusText:"Stale"},offline:{selected:k,total:j,statusText:"Offline"},unseen:{selected:F,total:w,statusText:"Unseen"}})),[v,b,j,w,A,C,k]),[,I]=(0,h.A)();(0,r.A)((()=>{I(t)}),[t]);const[N,,L,S]=(0,a.A)();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.A,{ref:p,testid:"globalFilter-nodes",icon:"nodes",onClick:n,round:1,padding:e?[1]:[2],width:"auto",cursor:"pointer",selected:t,children:(0,y.jsx)(x.A,{"data-testid":"nodesIndicator",alignItems:"center",justifyContent:"end",gap:2,children:Object.keys(T).filter((e=>T[e].total)).map((t=>(0,y.jsx)(c.A,{statusText:T[t].statusText,total:T[t].total,selected:T[t].selected,statusColor:u.P[t],isScreenSmall:e},t)))})}),p.current&&t&&(0,y.jsx)($,{target:p.current,onClose:g,onAddNodes:L}),N&&(0,y.jsx)(f.A,{onClose:S})]})}))},30531:(e,t,n)=>{"use strict";var o=n(46518),r=n(69565),l=n(79306),s=n(28551),i=n(1767),a=n(48646),d=n(19462),c=n(9539),u=n(96395),h=n(30684),x=n(84549),f=!u&&!h("flatMap",(function(){})),g=!u&&!f&&x("flatMap",TypeError),p=u||f||g,m=d((function(){for(var e,t,n=this.iterator,o=this.mapper;;){if(t=this.inner)try{if(!(e=s(r(t.next,t.iterator))).done)return e.value;this.inner=null}catch(l){c(n,"throw",l)}if(e=s(r(this.next,n)),this.done=!!e.done)return;try{this.inner=a(o(e.value,this.counter++),!1)}catch(l){c(n,"throw",l)}}}));o({target:"Iterator",proto:!0,real:!0,forced:p},{flatMap:function(e){s(this);try{l(e)}catch(t){c(this,"throw",t)}return g?r(g,this,e):new m(i(this),{mapper:e,inner:null})}})},30670:(e,t,n)=>{"use strict";n(30531)},31800:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},48646:(e,t,n)=>{"use strict";var o=n(69565),r=n(28551),l=n(1767),s=n(50851);e.exports=function(e,t){t&&"string"===typeof e||r(e);var n=s(e);return l(r(void 0!==n?o(n,e):e))}},54128:(e,t,n)=>{var o=n(31800),r=/^\s+/;e.exports=function(e){return e?e.slice(0,o(e)+1).replace(r,""):e}},57280:(e,t)=>{"use strict";var n="clock",o=[128339,"clock-four"],r="f017",l="M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z";t.mw={prefix:"far",iconName:n,icon:[512,512,o,r,l]},t.a$=t.mw},62672:(e,t)=>{"use strict";var n=[128683,"cancel"],o="f05e",r="M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z";t.mw={prefix:"fas",iconName:"ban",icon:[512,512,n,o,r]},t.Df=t.mw},63589:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});n(96540);var o=n(65258),r=n(82103),l=n(19186),s=n(24609),i=n(1174),a=n(74848);var d;const c=(d=o.Button,e=>{const t=(0,l.XA)(),n=(0,s.dg)();return(0,a.jsx)(i.A,{permission:"node:Create",children:l=>{const s=(0,a.jsx)(d,{disabled:!l,...e});return l?s:(0,a.jsx)(r.A,{content:n?"You are viewing your local node, connect to cloud and connect multiple nodes to view at once":`Only admin users can add nodes to ${t.name}`,"data-testid":"addNodeTooltipContainer",children:(0,a.jsx)(o.Box,{children:s})})}})})},78659:(e,t,n)=>{var o=n(87133),r=n(99374);e.exports=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=r(n))===n?n:0),void 0!==t&&(t=(t=r(t))===t?t:0),o(r(e),t,n)}},87133:e=>{e.exports=function(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},98383:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});n(98992),n(81454);var o=n(96540),r=n(65258),l=n(24013),s=n(87083),i=n(74848);const a=e=>{let{children:t}=e;return(0,i.jsxs)(r.Flex,{"data-testid":"selected-nodes-container",gap:1,alignItems:"center",width:"100%",children:[(0,i.jsx)(r.Flex,{alignItems:"center",children:(0,i.jsx)(r.TextSmall,{whiteSpace:"nowrap","data-testid":"selected-nodes-container-message",color:"primary",children:"Selected filters:"})}),(0,i.jsx)(r.Flex,{height:{max:50},overflow:{vertical:"auto"},padding:[1],gap:1,alignItems:"center",flexWrap:!0,children:t})]})},d=(0,o.memo)(a);var c=n(79748);const u=e=>{let{onRemove:t}=e;return(0,i.jsx)(r.Box,{"data-testid":"remove-button",as:r.Icon,name:"close_circle",onClick:t,cursor:"pointer",width:3,height:3,color:"textLite"})},h=e=>{let{removeFilter:t,group:n,id:o,value:l,isAnchorDisabled:s,onClick:a,ref:d}=e;const[h,x]=l.split("|"),f=x?`${h} > ${x}`:h;return(0,i.jsx)(r.Flex,{ref:d,"data-testid":`selected-node-item-${o}`,children:(0,i.jsx)(r.Pill,{flavour:"neutral",hollow:!0,children:(0,i.jsxs)(r.Flex,{position:"relative",gap:2,alignItems:"center",children:[a?(0,i.jsx)(c.A,{Component:r.TextSmall,disabled:s,onClick:a,cursor:"pointer",color:"text",hoverColor:"primary",visitedColor:"accent",disabledColor:"textLite",children:f}):(0,i.jsx)(r.TextSmall,{children:f}),(0,i.jsx)(u,{onRemove:()=>t({param:n,removedValue:o}),id:o})]})})})},x=(0,o.memo)(h),f={selectedNodeIds:"Node",nodeStatuses:"Status",nodeLabels:"Host label",nodeCapabilities:"Capability",nodeVersions:"Version"},g=e=>{let{group:t,subGroup:n,groupLabel:l,values:s,filtersByLabel:a={},hasUnion:d,union:c="AND",removeFilter:u,Component:h=x}=e;const p=l||f[t];if(!Array.isArray(s)||!s.length)return null;const m="nodeLabels"!==t||n?{}:a,v=Object.entries(m);return v.length?v.map(((e,n)=>{let[o,r]=e;return(0,i.jsx)(g,{group:t,subGroup:o,groupLabel:`${f[t]} ${o}`,values:r,hasUnion:n>0,removeFilter:u},n)})):(0,i.jsxs)(o.Fragment,{children:[d&&(0,i.jsx)(r.TextSmall,{strong:!0,children:c}),(0,i.jsxs)(r.Pill,{flavour:"neutral",hollow:!0,gap:1,TextComponent:r.Flex,textProps:{alignItems:"center",gap:1},flexWrap:!0,children:[(0,i.jsxs)(r.TextNano,{strong:!0,children:[p,":"]}),s.map(((e,l)=>(0,i.jsxs)(o.Fragment,{children:[l>0&&(0,i.jsx)(r.TextSmall,{strong:!0,children:"OR"}),(0,i.jsx)(h,{removeFilter:u,id:n?`${n}|${e}`:e,value:e,group:t})]},e)))]})]},"filter")},p=e=>{let{removeFilter:t,value:n,ref:o}=e;const r=(0,l.xY)(n,"name"),s=(0,l.xY)(n,"isOffline"),a=(0,l.d3)(n);return(0,i.jsx)(x,{ref:o,removeFilter:t,group:"selectedNodeIds",id:n,value:r,isAnchorDisabled:s,onClick:a})},m=(0,o.memo)((e=>{let{flavour:t}=e;const[[n,o=[]],l]=(0,s._e)({extraKey:t,merge:!1});if(!n.length&&!o.length)return(0,i.jsx)("div",{});const a=(0,s.Pt)(n);return(0,i.jsx)(r.Flex,{width:"100%",overflow:"hidden",padding:[2,0],children:(0,i.jsxs)(d,{children:[n.map(((e,t)=>{let[n,o]=e;return(0,i.jsx)(g,{group:n,values:o,filtersByLabel:a,hasUnion:t>0,removeFilter:l},n)})),(0,i.jsx)(g,{group:"selectedNodeIds",values:o,hasUnion:!!n.length&&!!o.length,union:"OR",removeFilter:l,Component:p})]})})}))},99374:(e,t,n)=>{var o=n(54128),r=n(23805),l=n(44394),s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(l(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o(e);var n=i.test(e);return n||a.test(e)?d(e.slice(2),n?2:8):s.test(e)?NaN:+e}}}]);