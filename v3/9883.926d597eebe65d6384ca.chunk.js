try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2b251bfb-f28f-46ee-99b3-00fb74e507c4",e._sentryDebugIdIdentifier="sentry-dbid-2b251bfb-f28f-46ee-99b3-00fb74e507c4")}catch(e){}("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{}).SENTRY_RELEASE={id:"6f1faf434b0a85eb183c91391b598f364a828f27"};(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[9883],{1457:(e,t,n)=>{n.d(t,{Rq:()=>r,oL:()=>a,u:()=>s,ue:()=>l});var o=n(52035),i=n(84929);const l={items:[],error:"",id:null,loading:!0,loaded:!1},r=(0,i.Iz)((()=>(0,o.eU)(0))),a=(0,i.Iz)((e=>(0,o.eU)({...l,id:e}))),s=(0,i.Iz)((()=>(0,o.eU)(null)))},34646:(e,t,n)=>{n.d(t,{FX:()=>l,ON:()=>a,Uj:()=>s,Zl:()=>i,lG:()=>r,lt:()=>d});var o=n(91130);const i=e=>o.A.get(`/api/v3/spaces/${e}/scim`),l=(e,t)=>e?o.A.get(`/api/v3/spaces/${t}/scim/${e}`):Promise.resolve({data:null}),r=(e,t)=>o.A.post(`/api/v3/spaces/${e}/scim`,t),a=(e,t,n)=>o.A.patch(`/api/v3/spaces/${t}/scim/${e}`,n),s=(e,t)=>o.A.delete(`/api/v3/spaces/${t}/scim/${e}`),d=(e,t)=>e?o.A.post(`/api/v3/spaces/${t}/scim/${e}/rotate-token`):Promise.resolve({data:null})},49883:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ce});var o=n(96540),i=n(65258),l=n(60908),r=n(74891),a=n(74848);const s=(0,r.A)(i.Button),d="rows",c="grid",u=e=>t=>e==d&&t||e==c&&!t?{flavour:"hollow"}:{},h=e=>{let{showGrid:t,toggleLayout:n}=e;return(0,a.jsxs)(i.Flex,{alignItems:"center",children:[(0,a.jsx)(s,{small:!0,groupFirst:!0,icon:"list",onClick:n,tooltip:"Show in rows",...u(d)(t)}),(0,a.jsx)(s,{small:!0,groupLast:!0,icon:"grid",onClick:n,tooltip:"Show in grid",...u(c)(t)})]})};n(98992),n(72577);var g=n(91130);var x=n(24609),p=n(32052),f=n(52035),m=n(84929);const j={items:[],error:"",id:null,loading:!0,loaded:!1,oidcID:null},b=(0,m.Iz)((()=>(0,f.eU)(0))),v=(0,m.Iz)((e=>(0,f.eU)({...j,id:e}))),C=(0,m.Iz)((()=>(0,f.eU)(null)));var k=n(34843),y=n(57377);const A=(0,m.Iz)((e=>{let{id:t,key:n}=e;return(0,f.eU)((e=>{const o=e(v(t));return n?o[n]:o}),((e,o,i)=>{o(v(t),(e=>n?{...e,[n]:"function"===typeof i?i(e):i}:{...e,..."function"===typeof i?i(e):i}))}))}),y.Ay),w=e=>((e,t)=>(0,k.md)(A({id:e,key:t})))((0,x.vt)(),e),D=e=>(0,k.fp)(C(e)),S=e=>{const t=(0,x.vt)(),[n,i]=D(t),l=(0,o.useCallback)((function(){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.A.post(`/api/v3/spaces/${e}/oidc`,{...t})}(t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}),[t]),r=(0,o.useCallback)((function(){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return g.A.patch(`/api/v3/spaces/${t}/oidc/${e}`,n)}(e,t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}),[e,t]),a=(0,o.useCallback)((()=>((e,t)=>g.A.delete(`/api/v3/spaces/${t}/oidc/${e}`))(e,t).then((()=>(i(null),Promise.resolve())))),[e,t,i]);return{config:n,isEdit:!!e,save:e?r:l,remove:a}},F=()=>{const e=(0,x.vt)(),t=((e,t)=>(0,k.Xr)(A({id:e,key:t})))(e),n=(()=>{const e=(0,x.vt)();return(0,k.md)(b(e))})();(0,p.A)((()=>({enabled:!!e,fetch:()=>(e=>g.A.get(`/api/v3/spaces/${e}/oidc`))(e),onFail:e=>t({...j,error:e?.response?.data||e}),onSettle:()=>t({loading:!1,loaded:!0}),onSuccess:e=>{const{oidcID:n}=e.find((e=>{let{oidcID:t}=e;return!!t}))||{};t((t=>({...t,items:e,oidcID:n})))}})),[n,e])};n(54520),n(81454);var I=n(55093),T=n(79748),L=n(95565),M=n(76375);const $="authentication",E=function(){let{flavour:e,error:t={},logProps:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{loaded:r,isPaid:s}=(0,M.A)(),{errorMsgKey:d}=t,c=(0,o.useMemo)((()=>function(){let{flavour:e,isPaid:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e===$;return{ErrForbidden:{title:"No permissions",Content:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Text,{children:"You don't have permissions to view the authentication methods."}),(0,a.jsx)(i.Text,{children:"Please contact the Space administrators if this is unexpected."})]})},ErrNotAvailable:{title:"No available "+(n?"Authn":"Authz"),Content:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Text,{children:["No available ",n?"authentication":"authorization"," integrations found."]}),t?null:(0,a.jsxs)(i.Text,{children:["To enable this feature, please"," ",(0,a.jsx)(L.A,{children:(0,a.jsx)(i.Text,{color:"primary",children:"upgrade to the Business plan"})}),"."]})]})},default:{title:"Error",Content:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Text,{children:"Something went wrong, please check again later."}),(0,a.jsxs)(i.Text,{children:["If the problem persists feel free to contact us with a"," ",(0,a.jsx)(T.A,{href:"https://github.com/netdata/netdata-cloud/issues/new/choose",target:"_blank",rel:"noopener noreferrer",children:"ticket"})]})]})}}}({flavour:e,isPaid:s})),[e,s]),{title:u,Content:h}=c[d]||c.default;return r?(0,a.jsx)(l.DL,{errorMsgKey:d,...n,children:(0,a.jsxs)(i.Flex,{column:!0,gap:1,padding:[4,0],children:[(0,a.jsxs)(i.Flex,{alignItems:"center",gap:2,children:[(0,a.jsx)(i.Icon,{name:"warning_triangle",color:"warning"}),(0,a.jsx)(i.H5,{children:u})]}),(0,a.jsx)(h,{})]})}):null},B={flexWrap:!0},U={column:!0},P=e=>{let{flavour:t,loading:n,loaded:l,items:r=[],oidcID:s,error:d,showGrid:c,CardComponent:u,errorViewProps:h={},noLoader:g}=e;const x=r.filter((e=>{let{available:t}=e;return!!t})),p=(0,o.useMemo)((()=>({width:"100%",gap:4,...c?B:U})),[c]),f=(0,o.useMemo)((()=>c?{height:37,width:75,margin:[0,0,4,0]}:{}),[c]);return!l&&n?g?null:(0,a.jsx)(I.A,{title:"Loading..."}):l?d?(0,a.jsx)(E,{flavour:t,error:d,...h}):x.length?u?(0,a.jsx)(i.Flex,{...p,children:x.map((e=>(0,a.jsx)(u,{configuredItemExists:!!s,...f,...e},e.id)))}):null:(0,a.jsx)(E,{flavour:t,error:{errorMsgKey:"ErrNotAvailable"},...h}):(0,a.jsx)(E,{flavour:t,error:"Something went wrong",...h})};var R=n(6304);n(23215);const z=e=>{const t=(0,x.vt)(),[,n]=D(t);(0,p.A)((()=>({enabled:!!t,fetch:()=>((e,t)=>e?g.A.get(`/api/v3/spaces/${t}/oidc/${e}`):Promise.resolve({data:null}))(e,t),onSuccess:e=>{n(e)}})),[t,e])},q={okta:{name:"okta",color:"bright"},"auth-server":{name:"openid",color:"bright"}},_=e=>{let{title:t,onConfirm:n,onDecline:o,isConfirmLoading:l}=e;return(0,a.jsx)(i.ConfirmationDialog,{confirmLabel:"Yes, delete",handleConfirm:n,handleDecline:o,message:(0,a.jsxs)(a.Fragment,{children:["You are about to delete ",(0,a.jsx)("strong",{children:t})," configuration.",(0,a.jsx)("br",{}),"Are you sure you want to continue?"]}),title:"Delete configuration",isConfirmLoading:l})};var N=n(99728),G=n(3203),X=n(3319);const O=(0,r.A)((0,G.A)(i.Button)),Y=e=>{let{title:t,isLoading:n,isEditable:l,validFields:r,onSave:s,onConfirmDelete:d}=e;const[c,,u,h]=(0,R.A)(),g=(0,N.JT)("oidc:Manage"),{sendLog:x}=(0,X.A)(),p=(0,o.useCallback)((()=>{d(),h(),x({feature:"OidcModalConfirmDeleteButton",title:t})}),[d,h]),f=(0,o.useMemo)((()=>({feature:"OidcModalSaveButton",label:"Save",onClick:s,disabled:!r||!g||n,tooltip:g?r?"Save the configuration":"Please provide values to the required fields":"You don't have permission to manage single sign-on configurations."})),[s,r,g,n]),m=(0,o.useMemo)((()=>({feature:"OidcModalDeleteButton",label:"Delete",flavour:"hollow",danger:!0,onClick:u,disabled:!g||n,tooltip:g?"Delete the configuration":"You don't have permission to manage single sign-on configurations."})),[u,n,g]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.ModalFooter,{gap:2,children:[l?(0,a.jsx)(O,{...m}):null,(0,a.jsx)(O,{...f})]}),c?(0,a.jsx)(_,{title:t,onConfirm:p,onDecline:h,isConfirmLoading:n}):null]})},H={string:e=>{let{propKey:t,title:n,setFormData:l,...r}=e;const s=(0,o.useCallback)((e=>{let{target:n}=e;l((e=>({...e,[t]:n.value})))}),[t,l]);return(0,a.jsx)(i.TextInput,{label:n,onChange:s,...r})},default:()=>null},V=e=>{let{propKey:t,type:n,setFormData:i,...l}=e;const r=H[n]||H.default,s=(0,o.useCallback)((e=>{let{target:n}=e;i((e=>({...e,initialData:!1,[t]:n.value})))}),[i]);return(0,a.jsx)(r,{onChange:s,...l})},K=e=>{let{properties:t={},errors:n={},formData:o,required:l,setFormData:r}=e;return(0,a.jsx)(i.Flex,{column:!0,gap:2,children:Object.entries(t).map((e=>{let[t,i]=e;return(0,a.jsx)(V,{propKey:t,isRequired:l.includes(t),...i,value:o[t]||"",setFormData:r,error:n[t]},t)}))})};var W=n(63872);n(8872);const Z={string:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n}=t;return"uri"!=n||(e=>{try{const{host:t}=new URL(e);return/^(?!-)[a-zA-Z0-9-]{1,63}(?<!-)(\.[a-zA-Z0-9]{1,63})+$/.test(t)}catch{return!1}})(e)?null:"Invalid URL format"},default:()=>null},J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce(((e,n)=>{let[o,i]=n;const l=t[o]||{},r=(Z[l.type]||Z.default)(i,l);return r&&(e[o]=r),e}),{})},Q=e=>{let{id:t,oidcID:n,title:r,slug:s,description:d,properties:c={},required:u=[],isEditable:h,docsUrl:g,onClose:p,openDnsRecord:f}=e;z(n);const{config:m,isEdit:j,save:v,remove:C}=S(n),[y,A]=(0,o.useState)({}),[w,,D,F]=(0,R.A)(),L=(()=>{const e=(0,x.vt)(),t=(0,k.Xr)(b(e));return(0,o.useCallback)((()=>t((e=>e+1))),[t])})(),[M,$]=(0,W.A)(),[E,B]=(0,o.useState)({}),U=u.every((e=>!!y[e]));(0,o.useEffect)((()=>{A(m||{})}),[m]),(0,o.useEffect)((()=>{B(J(y,c))}),[y,c,B]);const P=(0,o.useCallback)((()=>{D(),v({...j?{}:{integrationID:t},...y}).then((function(){let{data:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};M({header:"Success",text:`Successfully configured ${r}`}),p(),L(),e?.dnsRecordValue&&f()})).catch($).finally((()=>{F()}))}),[v,y,j,M,$,p,L,D,F]),_=(0,o.useCallback)((()=>{D(),C().then((()=>{M({header:"Success",text:`Successfully deleted ${r} configuration`}),p(),L()})).catch($).finally((()=>{F()}))}),[C,M,$,p,L,D,F]);return(0,a.jsx)(l.Ay,{feature:"AuthModal",title:r,children:(0,a.jsx)(i.Modal,{backdropProps:{backdropBlur:!0},onEsc:p,children:(0,a.jsxs)(i.ModalContent,{width:{min:100,base:140},children:[(0,a.jsxs)(i.ModalHeader,{border:{side:"bottom",color:"disabled"},column:!0,gap:.5,padding:[6,4,3],children:[(0,a.jsxs)(i.Flex,{alignItems:"center",children:[(0,a.jsxs)(i.Flex,{gap:1,alignItems:"center",children:[(0,a.jsx)(i.Icon,{...q[s]||{}}),(0,a.jsx)(i.H3,{children:r})]}),p&&(0,a.jsx)(i.ModalCloseButton,{onClose:p,tooltip:"Close modal"})]}),(0,a.jsxs)(i.TextSmall,{as:i.Box,children:[d,g?(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(T.A,{Component:i.TextSmall,href:g,target:"_blank",whiteSpace:"nowrap",children:"Learn how to configure it."})]}):null]})]}),(0,a.jsx)(i.ModalBody,{height:{min:60,base:60},overflow:{vertical:"auto"},children:w?(0,a.jsx)(I.A,{height:60,title:"Loading..."}):(0,a.jsx)(K,{formData:y,required:u,setFormData:A,properties:c,errors:E})}),(0,a.jsx)(Y,{title:r,isLoading:w,isEditable:h,validFields:U||!!Object.keys(E).length,onSave:P,onConfirmDelete:_})]})})})};var ee=n(30005);const te=e=>{let{oidcID:t,title:n,slug:o,onClose:r}=e;z(t);const{config:s}=S(t);return s?.dnsRecordValue?(0,a.jsx)(l.Ay,{feature:"AuthDnsRecord",title:n,children:(0,a.jsx)(i.Modal,{backdropProps:{backdropBlur:!0},onEsc:r,children:(0,a.jsxs)(i.ModalContent,{width:{min:100,base:140},children:[(0,a.jsx)(i.ModalHeader,{border:{side:"bottom",color:"disabled"},column:!0,gap:.5,padding:[6,4,3],children:(0,a.jsxs)(i.Flex,{alignItems:"center",children:[(0,a.jsxs)(i.Flex,{gap:1,alignItems:"center",children:[(0,a.jsx)(i.Icon,{...q[o]||{}}),(0,a.jsx)(i.H3,{children:"Create a new TXT record in the DNS settings"})]}),r&&(0,a.jsx)(i.ModalCloseButton,{onClose:r,tooltip:"Close modal"})]})}),(0,a.jsx)(i.ModalBody,{height:{min:60,base:60},overflow:{vertical:"auto"},children:(0,a.jsxs)(i.Flex,{column:!0,gap:2,padding:[4],children:[(0,a.jsx)(i.Text,{children:"In your domain's DNS settings, create a new TXT record and use the code below as its' value."}),(0,a.jsx)(ee.Ay,{"data-testid":"dnsRecordValue",children:s.dnsRecordValue}),(0,a.jsx)(T.A,{Component:i.TextSmall,href:"https://learn.netdata.cloud/docs/netdata-cloud/authentication-&-authorization/enterprise-sso-authentication#how-to-authenticate-to-netdata",target:"_blank",whiteSpace:"nowrap",children:"Learn how to configure DNS TXT records"})]})})]})})}):null};var ne=n(73613),oe=n(98563);const ie=e=>{let{title:t,isEditable:n,isDisabled:o,onClick:i}=e;return o?null:(0,a.jsx)(ne.A,{align:"bottom",content:n?`Edit ${t} configuration`:`Configure ${t}`,plain:!0,children:(0,a.jsx)(oe.ro,{label:n?"Edit":"Configure",icon:"gear",small:!0,onClick:i})})},le=e=>{let{id:t,slug:n,title:o,description:l,"data-testid":r="card",configuredItemExists:s,oidcID:d,schema:c={},loading:u,...h}=e;const g=q[n],[x,,p,f]=(0,R.A)(),[m,,j,b]=(0,R.A)(),v=s&&!d,C=s&&!!d,{annotations:k={},properties:y={},required:A=[]}=c,{docsUrl:w}=k;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Flex,{background:"elementBackground",column:!0,"data-testid":r,justifyContent:"between",flex:!1,padding:[3,2,2,3],position:"relative",overflow:"hidden",round:.5,...h,children:[(0,a.jsx)(oe.MU,{"data-testid":`${r}-blurredIcon`,...g}),(0,a.jsxs)(i.Flex,{column:!0,"data-testid":`${r}-details`,gap:3,margin:[0,0,3,0],children:[(0,a.jsxs)(i.Flex,{"data-testid":`${r}-header`,justifyContent:"between",children:[(0,a.jsxs)(i.Flex,{alignItems:"center","data-testid":`${r}-titleContainer`,gap:1,children:[(0,a.jsx)(i.Icon,{"data-testid":`${r}-icon`,...g}),(0,a.jsx)(i.Text,{"data-testid":`${r}-title`,children:o})]}),(0,a.jsxs)(i.Flex,{gap:1,children:[C&&(0,a.jsx)(oe.ro,{label:"DNS TXT record",icon:"serviceDNS",small:!0,onClick:j,neutral:!0}),(0,a.jsx)(ie,{title:o,isEditable:C,isDisabled:v,onClick:p})]})]}),(0,a.jsxs)(i.TextSmall,{color:"textDescription","data-testid":`${r}-description`,children:[l," ",w&&(0,a.jsx)(T.A,{Component:oe.W6,"data-testid":`${r}-docsLink`,href:w,target:"_blank",whiteSpace:"nowrap",children:"Learn more."})]})]})]}),x&&(0,a.jsx)(Q,{id:t,oidcID:d,slug:n,title:o,description:l,docsUrl:w,properties:y,required:A,onClose:f,isEditable:C,openDnsRecord:j}),m&&(0,a.jsx)(te,{oidcID:d,slug:n,title:o,onClose:b})]})},re=e=>{let{showGrid:t}=e;F();const n=w();return(0,a.jsx)(P,{flavour:"authentication",showGrid:t,CardComponent:le,errorViewProps:{logProps:{feature:"AuthenticationIntegrationError"}},...n})};var ae=n(53746),se=n(63956),de=n(34646);const ce=e=>{const t=(0,x.vt)(),[,n]=(0,se.Hy)(t);(0,p.A)((()=>({enabled:!!t,fetch:()=>(0,de.FX)(e,t),onSuccess:e=>{n(e)}})),[t])},ue=e=>{let{title:t,onConfirm:n,onDecline:o,isConfirmLoading:l}=e;return(0,a.jsx)(i.ConfirmationDialog,{confirmLabel:"Yes, delete",handleConfirm:n,handleDecline:o,message:(0,a.jsxs)(a.Fragment,{children:["You are about to delete ",(0,a.jsx)("strong",{children:t})," integration.",(0,a.jsx)("br",{}),"Are you sure you want to continue?"]}),title:"Delete integration",isConfirmLoading:l})},he=(0,r.A)((0,G.A)(i.Button)),ge=e=>{let{title:t,isLoading:n,isEditable:l,isDirty:r,credentials:s,validFields:d,onActivate:c,onUpdate:u,onRotateToken:h,onConfirmDelete:g,onClose:x}=e;const[p,,f,m]=(0,R.A)(),j=(0,N.JT)("oidc:Manage"),{sendLog:b}=(0,X.A)(),v=(0,o.useCallback)((()=>{g(),m(),b({feature:"ScimModalConfirmDeleteButton",title:t})}),[g,m]),C=(0,o.useMemo)((()=>({feature:"ScimModalSaveButton",label:"Save",onClick:u,disabled:!r||!d||!j||n,tooltip:j?d?"Save the integration":"Please provide values to the required fields":"You don't have permission to manage scim integrations."})),[u,r,d,j,n]),k=(0,o.useMemo)((()=>({feature:"ScimModalDeleteButton",label:"Delete",flavour:"hollow",danger:!0,onClick:f,disabled:!j||n,tooltip:j?"Delete the integration":"You don't have permission to manage scim integrations."})),[f,n,j]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.ModalFooter,{gap:2,justifyContent:"between",children:[l&&!s?(0,a.jsx)(he,{...k}):(0,a.jsx)("div",{}),(0,a.jsx)(i.Flex,{gap:2,children:s?(0,a.jsx)(he,{label:"Done",onClick:x}):l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(he,{label:"Regenerate token",flavour:"hollow",onClick:h}),(0,a.jsx)(he,{...C})]}):(0,a.jsx)(he,{label:"Activate",onClick:c})})]}),p?(0,a.jsx)(ue,{title:t,onConfirm:v,onDecline:m,isConfirmLoading:n}):null]})};var xe=n(67723);const pe=e=>{let{baseURL:t,token:n}=e;return(0,a.jsxs)(i.Flex,{column:!0,gap:2,children:[(0,a.jsxs)(i.Flex,{column:!0,gap:1,children:[(0,a.jsx)(i.Text,{as:"label",children:"Base URL"}),(0,a.jsx)(xe.A,{logProps:{feature:"CopyScimBaseURL"},padding:[2],noMargin:!0,children:t})]}),(0,a.jsxs)(i.Flex,{column:!0,gap:1,children:[(0,a.jsx)(i.Text,{as:"label",children:"Token"}),(0,a.jsx)(xe.A,{logProps:{feature:"CopyScimToken"},padding:[2],noMargin:!0,children:n})]})]})},fe="Loading...",me=e=>{let{id:t,scimID:n,title:r,slug:s,description:d,properties:c={},required:u=[],docsUrl:h,onClose:g}=e;ce(n);const x=(0,o.useRef)(),{integration:p,create:f,update:m,remove:j,rotateToken:b}=(0,se.dI)(n||t),v=(0,se.nB)(),[C,,k]=(0,R.A)(),[y,A]=(0,o.useState)({}),{isLoading:w,loadingText:D,startLoading:S,startLoadingToken:F,stopLoading:L}=(()=>{const[e,,t,n]=(0,R.A)(),[i,l]=(0,o.useState)(fe),r=(0,o.useCallback)((()=>{l("Generating token..."),t()}),[t,l]),a=(0,o.useCallback)((()=>{n(),l(fe)}),[n,l]);return{isLoading:e,loadingText:i,startLoading:t,startLoadingToken:r,stopLoading:a}})(),[M,$]=(0,W.A)(),[E,B]=(0,o.useState)({}),U=u.every((e=>!!y[e])),[P,z]=(0,o.useState)();(0,o.useEffect)((()=>{if(Object.keys(p||{}).length){const e={...p,initialData:!0};A(e)}}),[p]),(0,o.useEffect)((()=>{B(J(y,c))}),[y,c,B]),(0,o.useEffect)((()=>{Object.keys(y).length&&!y.initialData&&(x.current=!0)}),[y]);const _=(0,o.useCallback)((()=>{C&&v(),g()}),[C,v,g]),N=(0,o.useCallback)((()=>{const{scimToken:e}=y||{};F(),f({scimToken:e}).then((e=>{let{data:t}=e;z(t),k()})).catch((e=>{$(e)})).finally((()=>L()))}),[t,y,f,k,z,F,L,$]),G=(0,o.useCallback)((()=>{const{scimToken:e}=y||{};S(),m({scimToken:e}).then((()=>{M("Successfully updated integration")})).catch($).finally(L)}),[y,m,S,L,M,$]),X=(0,o.useCallback)((()=>{F(),b().then((e=>{let{data:t}=e;z(t),k()})).catch((e=>{$(e)})).finally((()=>L()))}),[b,F,L,z,k,$]),O=(0,o.useCallback)((()=>{S(),j().then((()=>{M({header:"Success",text:`Successfully deleted ${r} integration`}),v(),_()})).catch($).finally((()=>{L()}))}),[j,v,M,$,_,S,L]);return(0,a.jsx)(l.Ay,{feature:"AuthModal",title:r,children:(0,a.jsx)(i.Modal,{backdropProps:{backdropBlur:!0},onEsc:_,children:(0,a.jsxs)(i.ModalContent,{width:{min:100,base:140},children:[(0,a.jsxs)(i.ModalHeader,{border:{side:"bottom",color:"disabled"},column:!0,gap:.5,padding:[6,4,3],children:[(0,a.jsxs)(i.Flex,{alignItems:"center",children:[(0,a.jsxs)(i.Flex,{gap:1,alignItems:"center",children:[(0,a.jsx)(i.Icon,{...q[s]||{}}),(0,a.jsx)(i.H3,{children:r})]}),g&&(0,a.jsx)(i.ModalCloseButton,{onClose:_,tooltip:"Close modal"})]}),(0,a.jsxs)(i.TextSmall,{as:i.Box,children:[d,h?(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsx)(T.A,{Component:i.TextSmall,href:h,target:"_blank",whiteSpace:"nowrap",children:"Learn how to configure it."})]}):null]})]}),(0,a.jsx)(i.ModalBody,{height:{min:40,base:60},overflow:{vertical:"auto"},children:w?(0,a.jsx)(I.A,{height:40,title:D}):P?(0,a.jsx)(pe,{...P}):(0,a.jsx)(K,{formData:y,required:u,setFormData:A,properties:c,errors:E})}),(0,a.jsx)(ge,{title:r,isLoading:w,isEditable:!!n,isDirty:x?.current,credentials:P,validFields:U||!!Object.keys(E).length,onActivate:N,onUpdate:G,onRotateToken:X,onConfirmDelete:O,onClose:_})]})})})},je=e=>{let{title:t,isActive:n,onClick:i}=e;const{tooltipContent:l,buttonLabel:r,icon:s}=(0,o.useMemo)((()=>({tooltipContent:n?`Configure ${t}`:`Activate ${t}`,buttonLabel:n?"Configure":"Activate",icon:n?"gear":null})),[n]);return(0,a.jsx)(ne.A,{align:"bottom",content:l,plain:!0,children:(0,a.jsx)(oe.ro,{label:r,icon:s,small:!0,onClick:i})})},be=e=>{let{id:t,slug:n,title:o,description:l,"data-testid":r="card",schema:s={},SCIMID:d,...c}=e;const[u,,h,g]=(0,R.A)(),x=!!d,{annotations:p={},properties:f={},required:m=[]}=s,{docsUrl:j}=p;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Flex,{background:"elementBackground",column:!0,"data-testid":r,justifyContent:"between",flex:!1,padding:[3,2,2,3],position:"relative",overflow:"hidden",round:.5,...c,children:[(0,a.jsx)(oe.MU,{"data-testid":`${r}-blurredIcon`}),(0,a.jsxs)(i.Flex,{column:!0,"data-testid":`${r}-details`,gap:3,margin:[0,0,3,0],children:[(0,a.jsxs)(i.Flex,{"data-testid":`${r}-header`,justifyContent:"between",children:[(0,a.jsx)(i.Text,{"data-testid":`${r}-title`,children:o}),(0,a.jsx)(je,{title:o,onClick:h,isActive:x})]}),(0,a.jsxs)(i.TextSmall,{color:"textDescription","data-testid":`${r}-description`,children:[l," ",j&&(0,a.jsx)(T.A,{Component:oe.W6,"data-testid":`${r}-docsLink`,href:j,target:"_blank",whiteSpace:"nowrap",children:"Learn more."})]})]})]}),u&&(0,a.jsx)(me,{id:t,scimID:d,slug:n,title:o,description:l,docsUrl:j,properties:f,required:m,onClose:g})]})},ve=e=>{let{showGrid:t}=e;(0,ae.A)();const n=(0,se.Xy)();return(0,a.jsx)(P,{flavour:"authorization",showGrid:t,CardComponent:be,errorViewProps:{logProps:{feature:"AuthorizationIntegrationError"}},...n,noLoader:!0})},Ce=e=>{const[t,n]=(0,R.A)();return(0,a.jsx)(l.Ay,{tab:"AuthenticationAndAuthorization",children:(0,a.jsxs)(i.Flex,{column:!0,gap:4,height:"100%",overflow:{vertical:"auto"},flex:"grow",padding:[2,4,0,4],...e,children:[(0,a.jsxs)(i.Flex,{alignItems:"center",justifyContent:"between",children:[(0,a.jsx)(i.TextBig,{margin:[1,0,3],children:"See the available single sign-on, authorization, and authentication integrations and configure the ones that your company supports."}),(0,a.jsx)(h,{showGrid:t,toggleLayout:n})]}),(0,a.jsx)(re,{showGrid:t}),(0,a.jsx)(i.Box,{as:"hr",height:"1px",width:"100%",margin:t?[-4,0,0,0]:[],sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}}),(0,a.jsx)(ve,{showGrid:t})]})})}},53746:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(34646),i=n(24609),l=n(32052),r=n(1457),a=n(63956);const s=()=>{const e=(0,i.vt)(),t=(0,a.cP)(e),n=(0,a.Bc)();(0,l.A)((()=>({enabled:!!e,fetch:()=>(0,o.Zl)(e),onFail:e=>t({...r.ue,error:e?.response?.data||e}),onSettle:()=>t({loading:!1,loaded:!0}),onSuccess:e=>{t({...r.ue,items:e})}})),[n,e])}},63956:(e,t,n)=>{n.d(t,{Bc:()=>u,Hy:()=>f,Xy:()=>p,cP:()=>x,dI:()=>m,nB:()=>h});var o=n(96540),i=n(52035),l=n(34843),r=n(84929),a=n(24609),s=n(1457),d=n(34646),c=n(57377);const u=()=>{const e=(0,a.vt)();return(0,l.md)((0,s.Rq)(e))},h=()=>{const e=(0,a.vt)(),t=(0,l.Xr)((0,s.Rq)(e));return(0,o.useCallback)((()=>t((e=>e+1))),[t])},g=(0,r.Iz)((e=>{let{id:t,key:n}=e;return(0,i.eU)((e=>{const o=e((0,s.oL)(t));return n?o[n]:o}),((e,o,i)=>{o((0,s.oL)(t),(e=>n?{...e,[n]:i}:{...e,...i}))}))}),c.Ay),x=(e,t)=>(0,l.Xr)(g({id:e,key:t})),p=e=>{const t=(0,a.vt)();return(0,l.md)(g({id:t,key:e}))},f=e=>(0,l.fp)((0,s.u)(e)),m=e=>{const t=(0,a.vt)(),[n,i]=f(t);return{integration:n,create:(0,o.useCallback)((function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.lG)(t,{integrationID:e,...n})}),[t]),update:(0,o.useCallback)((function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.ON)(e,t,n)}),[e,t]),remove:(0,o.useCallback)((()=>(0,d.Uj)(e,t).then((()=>(i(null),Promise.resolve())))),[e,t,i]),rotateToken:(0,o.useCallback)((()=>(0,d.lt)(e,t)),[e,t])}}}}]);