try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="26d31fd1-0a51-4f0e-b412-9a0851730eb5",e._sentryDebugIdIdentifier="sentry-dbid-26d31fd1-0a51-4f0e-b412-9a0851730eb5")}catch(e){}("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{}).SENTRY_RELEASE={id:"6f1faf434b0a85eb183c91391b598f364a828f27"};(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[7167],{67167:(e,t,n)=>{n.r(t),n.d(t,{default:()=>vt});var o=n(96540),r=n(65258),s=n(73937),l=(n(98992),n(81454),n(63950)),i=n.n(l),a=n(74891),c=n(74848);const d=(0,a.A)(r.Icon),u=()=>(0,c.jsxs)(r.Flex,{column:!0,gap:2,width:{max:80},children:[(0,c.jsx)(r.Text,{lineHeight:1.5,children:"Select the node you want to configure."}),(0,c.jsxs)(r.Text,{lineHeight:1.5,children:["You can"," ",(0,c.jsx)(r.Text,{strong:!0,color:"primary",children:"apply your changes to multiple nodes"})," ","by selecting ",(0,c.jsx)(r.Text,{strong:!0,children:"Submit to multiple nodes"})," option of the"," ",(0,c.jsx)(r.Text,{strong:!0,children:"Submit"})," button in the configuration form."]})]}),h=(0,o.memo)((function(){let{node:e,setNode:t=i(),options:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.jsxs)(r.Flex,{"data-testid":"dyncfg-nodes-selector-container",width:"250px",column:!0,gap:1,children:[(0,c.jsxs)(r.Flex,{gap:1,alignItems:"center",children:[(0,c.jsx)(r.TextBig,{children:"Node"}),(0,c.jsx)(d,{name:"information",color:"text",tooltip:u,tooltipProps:{plain:!0,isBasic:!0,align:"right"},WrapperComponent:r.Flex})]}),(0,c.jsx)(r.Select,{placeholder:"Select a node",options:n,value:e,onChange:t})]})}));n(23215),n(54520),n(37550);var g=n(42790),x=n(7101),m=n(49435);const p=()=>{const[e,t]=(0,x.zc)(),[n,r]=(0,g.N9)("dyncfgSearchTerm"),s={...e,term:n||e.term},{term:l,props:i}=s||{},a=!!Object.keys(s.props||{}).length,c=(0,o.useCallback)((e=>{r(void 0),t((t=>({...t,term:e})))}),[t,r]),d=(0,o.useCallback)(((e,n)=>{t((t=>({...t,props:{...t.props||{},[e]:n}})))}),[t]),u=(0,o.useCallback)((e=>{t((t=>{const n={...t};return n.props?.[e]&&delete n.props[e],n}))}),[t]),h=(0,o.useCallback)((()=>{t((e=>({...e,props:void 0})))}),[t]);return{searchItem:s,hasProps:a,searchForTerm:c,searchByProp:d,testString:(0,o.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";if(!l)return!0;try{return Object.keys(e.templateChildren||[]).length?Object.keys(e.templateChildren).some((e=>(0,m.yX)(String(e),l,{fuzzyFactor:.1}))):(0,m.yX)(String(e[t]),l,{fuzzyFactor:.1})}catch{return!0}}),[l]),testProps:(0,o.useCallback)((e=>{if(!i||!Object.entries(i).filter((e=>{let[,t]=e;return void 0!==t})).length)return!0;const t=Object.entries(i).every((t=>{let[n,o]=t;return e[n]===o}));return Object.keys(e.templateChildren||[]).length?Object.values(e.templateChildren).some((e=>Object.entries(i).every((t=>{let[n,o]=t;return e[n]===o})))):t}),[i]),removeSearchProp:u,resetFilters:h}},b=()=>{const{searchItem:e,searchForTerm:t}=p(),{term:n}=e||{};return(0,c.jsxs)(r.Flex,{"data-testid":"dyncfg-search-container",width:"250px",column:!0,gap:1,children:[(0,c.jsx)(r.TextBig,{children:"Search"}),(0,c.jsx)(r.SearchInput,{value:n,placeholder:"Search",onChange:t,size:"large",height:"33px",padding:[2,3]})]})};var f=n(73613),j=n(77148),y=n(33185);const C=(0,y.default)(r.Flex).attrs((e=>({width:"100%",alignItems:"center",justifyContent:"between",gap:2,padding:[1],round:!0,cursor:"pointer",...e}))).withConfig({displayName:"styled__StyledSection",componentId:"sc-dutbst-0"})(["&:hover{background-color:",";}"],(0,r.getColor)("modalBackground")),A=(0,y.default)(r.Button).withConfig({displayName:"styled__StyledButton",componentId:"sc-dutbst-1"})(["&:before{content:",";width:18px;height:18px;display:",";align-items:center;justify-content:center;font-size:11px;font-weight:bold;position:absolute;top:-6px;left:-10px;border-radius:50%;background-color:",";color:",";z-index:10;}"],(e=>{let{warningItems:t}=e;return`"${t}"`}),(e=>{let{warningItems:t}=e;return t?"flex":"none"}),(0,r.getColor)("error"),(0,r.getColor)("bright"));var v=n(21885);const I=e=>{let{title:t="",props:n={},config:s={}}=e;const{searchItem:l,searchByProp:i,removeSearchProp:a}=p(),{props:d}=l||{},u=(0,o.useCallback)(((e,t)=>{const{searchCondition:n}=s[e]||{},o=Object.entries(n||{});if(o.length){const[e,n]=o[0];t?a(e):i(e,n)}}),[i,a]);return(0,c.jsxs)(r.Flex,{column:!0,gap:1,children:[(0,c.jsx)(r.TextBig,{strong:!0,children:t}),(0,c.jsx)(r.Flex,{column:!0,children:Object.entries(s).map((e=>{let[t,{label:o,searchCondition:l}]=e;const i=n?.[t]||0,[a,h]=Object.entries(l)[0],g=!!d&&d[a]===h,x=v.zy.includes(t)&&i>0?{color:"error"}:{};return(0,c.jsx)(f.A,{content:s[t]?.tooltip,align:"bottom",isBasic:!0,base:{background:"main",padding:[2]},children:(0,c.jsxs)(C,{onClick:()=>u(t,g),children:[(0,c.jsxs)(r.Flex,{alignItems:"center",gap:2,children:[(0,c.jsx)(r.Checkbox,{checked:g}),(0,c.jsx)(r.TextBig,{...x,children:o})]}),(0,c.jsx)(r.TextBig,{...x,children:i})]})},t)}))})]})};var k=n(79748);const w=e=>{let{sourceType:t,status:n}=e;const{hasProps:o,resetFilters:s}=p();return(0,c.jsxs)(r.Flex,{column:!0,padding:[3],gap:2,children:[(0,c.jsxs)(r.Flex,{alignItems:"center",justifyContent:"between",children:[(0,c.jsx)(r.TextBig,{strong:!0,children:"Filters"}),o?(0,c.jsx)(k.A,{onClick:s,children:"Clear"}):null]}),(0,c.jsx)(j.A,{color:"border"}),(0,c.jsx)(I,{title:"Source type",props:t,config:v.V8}),(0,c.jsx)(j.A,{color:"border"}),(0,c.jsx)(I,{title:"Status",props:n,config:v.T_})]})},F=(0,o.memo)(w);n(8872);const S=Object.keys(v.T_),T=Object.keys(v.V8),D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=t.reduce(((e,t)=>({...e,[t]:0})),{});return function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;for(let n=0;n<t.length;n++)if(t[n]===o[e]){const t=o[e];r[e]||(r[e]={}),r[e][t]=(r[e]?.[t]||0)+1}}},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.attention||(t.attention={}),e.restart_required&&(t.attention.restart_required=(t.attention?.restart_required||0)+1),e.plugin_rejected&&(t.attention.plugin_rejected=(t.attention?.plugin_rejected||0)+1)},B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.entries(e);if(n.length)for(let o=0;o<n.length;o++){const[e,r]=n[o];if(e.match(/\/[^/]+/g))return B(r,t);r.type&&"template"!==r.type&&(D("status",S)(r,t),D("source_type",T)(r,t),N(r,t))}return t},P=e=>{const{attention:t,source_type:n,status:r}=(0,o.useMemo)((()=>Object.keys(e)?B(e):{}),[e]);return{warningItems:(t?.restart_required||0)+(t?.plugin_rejected||0)+(r?.failed||0)+(r?.incomplete||0),menuItems:{attention:t,sourceType:n,status:r}}};var M=n(6304);const _=e=>{let{tree:t={}}=e;const n=(0,o.useRef)(),[s,l,,i]=(0,M.A)(!1),{hasProps:a}=p(),{warningItems:d,menuItems:u}=P(t);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(f.A,{align:"bottom",content:s?"Hide filters":"Show filters",children:(0,c.jsx)(r.Flex,{ref:n,children:(0,c.jsx)(A,{flavour:a?"default":"hollow",icon:"filterList",onClick:l,warningItems:d})})}),s&&n.current?(0,c.jsx)(r.Drop,{width:60,target:n.current,align:{top:"bottom",right:"right"},background:"modalTabsBackground",margin:[2,0,0],round:.5,close:i,onClickOutside:i,onEsc:i,children:(0,c.jsx)(F,{...u})}):null]})},E=(0,o.memo)(_);var O=n(10094);const z=(0,a.A)(r.Icon),L=e=>{let{isDisabled:t,onClick:n}=e;const r=(0,o.useCallback)((()=>{t||n()}),[t,n]);return(0,c.jsx)(z,{name:"x",onClick:r,color:"text",tooltip:t?null:"Clear selected items",disabled:t,noWrapper:!0,cursor:t?"default":"pointer"})};var V=n(93598),Y=n(19148),$=n(55093);const H=(0,a.A)(r.Flex),R=e=>{let{items:t,renderItem:n,titleOnExpanded:o="Hide items",titleOnCollapsed:s="Show items",tooltipOnExpanded:l=null,tooltipOnCollapsed:i=null,itemsContainerProps:a={}}=e;const[d,u]=(0,M.A)();return(0,c.jsxs)(r.Flex,{column:!0,gap:2,children:[(0,c.jsxs)(H,{alignItems:"center",gap:1,cursor:"pointer",onClick:u,tooltip:d?l:i,children:[(0,c.jsx)(r.Icon,{name:"chevron_right",color:"textLite",rotate:d?3:1,size:"small"}),(0,c.jsx)(r.Text,{color:"textLite",children:d?o:s})]}),(0,c.jsx)(r.Collapsible,{open:d,duration:0,children:(0,c.jsx)(r.Flex,{column:!0,gap:1,width:"100%",background:"modalBackground",height:{max:40},overflow:"auto",...a,children:t.map(n)})})]})},q=e=>{let{id:t,reason:n}=e;return(0,c.jsxs)(r.Flex,{column:!0,gap:2,children:[(0,c.jsx)(Y.QP,{children:t}),(0,c.jsx)(r.Flex,{padding:[2,4],background:"panelBg",border:{side:"left",color:"error"},children:(0,c.jsx)(r.Text,{children:n})})]},t)},W="processed",K=function(){let{actionVerb:e=W}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.jsxs)(r.Flex,{alignItems:"center",gap:2,children:[(0,c.jsx)(r.Icon,{name:"check",color:"primary"}),(0,c.jsxs)(r.TextBigger,{children:["All items were ",e," successfully."]})]})},U=function(){let{actionVerb:e=W}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.jsxs)(r.Flex,{alignItems:"center",gap:2,children:[(0,c.jsx)(r.Icon,{name:"x",color:"error"}),(0,c.jsxs)(r.TextBigger,{color:"error",children:["No item could be ",e,"."]})]})},Q=function(){let{success:e=0,fail:t=0,actionVerb:n=W}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.jsxs)(r.Flex,{column:!0,gap:2,children:[(0,c.jsxs)(r.Flex,{alignItems:"center",gap:2,children:[(0,c.jsx)(r.Icon,{name:"checkmark_s",color:"primary"}),(0,c.jsxs)(r.TextBigger,{children:[e," item",e>1?"s":""," successfully ",n,"."]})]}),(0,c.jsxs)(r.Flex,{alignItems:"center",gap:2,children:[(0,c.jsx)(r.Icon,{name:"x",color:"error"}),(0,c.jsxs)(r.TextBigger,{color:"error",children:[t," item",t>1?"s":""," could not be ",n,"."]})]})]})},X=e=>{let{results:t,idsForAction:n,renderAllSuccess:s=K,renderAllFail:l=U,renderPartialFail:i=Q}=e;const a=(0,o.useMemo)((()=>(t||[]).reduce(((e,t,o)=>[...e,...t?.value?.data?.status<200||t?.value?.data?.status>299?[{id:(n||[])[o],reason:t?.reason?.response?.data?.error_message||t?.reason?.response?.data?.errorMessage||t?.reason?.response?.data?.message||"Something went wrong"}]:[]]),[])),[t,n]),d=n.length-a.length;return t&&t.length?(0,c.jsx)(r.Flex,{column:!0,gap:2,padding:[2,4],children:a.length?(0,c.jsxs)(c.Fragment,{children:[a.length===n.length?l():i({success:d,fail:a.length}),(0,c.jsx)(R,{items:a,renderItem:q,tooltipOnCollapsed:"Show failed items.",itemsContainerProps:{gap:3}})]}):s()}):null},G=e=>{let{title:t="Progress",loading:n,results:s,idsForAction:l,onClose:i,resetSelectedItems:a,renderAllSuccess:d,renderAllFail:u,renderPartialFail:h}=e;const g=(0,x.Hj)(),m=(0,o.useCallback)((()=>{i(),a(),g()}),[g,i,a]);return(0,c.jsx)(r.Modal,{backdropContainerProps:{zIndex:"120"},backdropProps:{backdropBlur:!0},children:(0,c.jsxs)(r.ModalContent,{width:{min:100,base:140},background:"modalBackground",round:2,overflow:"hidden",children:[(0,c.jsx)(r.ModalHeader,{background:"modalBackground",children:(0,c.jsx)(r.H4,{children:t})}),(0,c.jsxs)(r.ModalBody,{padding:[4,0],children:[n?(0,c.jsx)($.A,{title:"Processing items...",height:"160px",background:"modalBackground"}):null,(0,c.jsx)(X,{results:s,idsForAction:l,renderAllSuccess:d,renderAllFail:u,renderPartialFail:h})]}),(0,c.jsx)(r.ModalFooter,{gap:2,children:(0,c.jsx)(r.Button,{flavour:"hollow",small:!0,label:"Close",onClick:m})})]})})};const J=(0,n(3203).A)(V.A),Z={canDoAction:[],noAction:[]},ee=e=>{let{selectedItems:t,onDecline:n,onConfirm:s,title:l="Proceed?",noActionTitle:i="No items available for this action",renderConfirmationMessage:a,...d}=e;const u=(0,o.useMemo)((()=>!t.canDoAction.length),[t.canDoAction]),h=(0,o.useCallback)((()=>{s(t)}),[t]);return(0,c.jsx)(r.ConfirmationDialog,{title:u?i:l,handleConfirm:h,handleDecline:n,confirmLabel:"Yes",declineLabel:u?"Close":"No",isConfirmDisabled:!t.canDoAction.length,backdropContainerProps:{zIndex:"120"},message:a(t),...d})},te=e=>{let{cmd:t,action:n,items:r,list:s,resetSelectedItems:l,isDisabled:i,actionIconProps:a={},confirmationDialogProps:d={},progressModalProps:u={}}=e;const[h,,g,x]=(0,M.A)(),[m,p]=(0,o.useState)(),[b,,f,j]=(0,M.A)(),[y,,C,A]=(0,M.A)(),v=(0,o.useMemo)((()=>s.reduce(((e,n)=>{const{id:o,cmds:s}=n;if(r.includes(o)){const o=s.includes(t)?"canDoAction":"noAction";return{...e,[o]:[...e[o],{...n,[o]:!0}]}}return e}),Z)),[s,r]),I=(0,o.useMemo)((()=>(v?.canDoAction||[]).map((e=>{let{id:t}=e;return t}))),[v.canDoAction]),{payload:k={},...w}=a||{},F=(0,o.useCallback)((()=>{i||f()}),[i,f]),S=(0,o.useCallback)((()=>{g(),j(),C(),n({ids:I}).then((e=>{p(e),x()}))}),[g,x,n,I,j,C]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(J,{edit:!0,feature:"DyncfgBulkAction",onClick:F,color:"text",iconColor:"text",flavour:"borderless",payload:{ids:I,...k},disabled:i,...w,...i?{tooltip:null}:{}}),b?(0,c.jsx)(ee,{selectedItems:v,onDecline:j,onConfirm:S,...d}):null,y?(0,c.jsx)(G,{loading:h,results:m,idsForAction:I,onClose:A,resetSelectedItems:l,...u}):null]})},ne=(0,a.A)(r.Icon),oe=(0,o.memo)((e=>{let{id:t,canDoAction:n,noAction:s,noActionMessage:l}=e;const i=(0,o.useMemo)((()=>({name:n?"arrow_down":"x",color:n?"success":"error",rotate:n?3:0,tooltip:s?l:null})),[n,s]);return(0,c.jsxs)(r.Flex,{alignItems:"center",gap:2,children:[(0,c.jsx)(r.Flex,{children:(0,c.jsx)(ne,{...i})}),(0,c.jsx)(Y.QP,{children:t})]},t)})),re=(0,a.A)(r.Icon),se="deleted",le=(0,o.memo)((()=>(0,c.jsx)(re,{name:"question",color:"text",size:"small",noWrapper:!0,tooltip:"You cannot delete predefined items. Only items added by user can be deleted."}))),ie=(0,o.memo)((()=>(0,c.jsxs)(r.Flex,{gap:2,children:[(0,c.jsx)(r.TextBig,{children:"None of the selected items can be deleted."}),(0,c.jsx)(le,{})]}))),ae=(0,o.memo)((e=>{let{canDoAction:t,noAction:n}=e;return(0,c.jsxs)(c.Fragment,{children:[n.length?(0,c.jsxs)(r.Flex,{gap:2,children:[(0,c.jsxs)(r.TextBig,{color:"warning",children:[n.length," of the selected items cannot be deleted."]}),(0,c.jsx)(le,{})]}):null,(0,c.jsx)(R,{items:[...n,...t],renderItem:e=>(0,c.jsx)(oe,{...e,noActionMessage:"Cannot be deleted."}),tooltipOnCollapsed:"Show items.",itemsContainerProps:{padding:[2]}})]})})),ce=e=>{let{canDoAction:t,noAction:n}=e;return t.length?(0,c.jsxs)(r.Flex,{column:!0,gap:2,children:[(0,c.jsxs)(r.TextBig,{children:["You are going to completely remove ",(0,c.jsxs)(r.TextBig,{strong:!0,children:[t.length," items"]})," and this action cannot be reverted."]}),(0,c.jsx)(ae,{canDoAction:t,noAction:n}),(0,c.jsx)(r.TextBig,{children:"Are you sure that you want to continue?"})]}):(0,c.jsx)(ie,{})},de=e=>{let{node:t,items:n,list:o,resetSelectedItems:r,isDisabled:s}=e;const l=(0,x.yW)({node:t});return(0,c.jsx)(te,{cmd:"remove",action:l,items:n,list:o,resetSelectedItems:r,isDisabled:s,actionIconProps:{icon:"trashcan",tooltip:"Delete selected items",payload:{label:"Delete"}},confirmationDialogProps:{title:"Delete selected items?",noActionTitle:"No items to delete",confirmLabel:"Yes, delete",renderConfirmationMessage:ce},progressModalProps:{renderAllSuccess:e=>(0,c.jsx)(K,{...e,actionVerb:se}),renderAllFail:e=>(0,c.jsx)(U,{...e,actionVerb:se}),renderPartialFail:e=>(0,c.jsx)(Q,{...e,actionVerb:se})}})},ue=(0,a.A)(r.Icon),he="restarted",ge=(0,o.memo)((()=>(0,c.jsx)(ue,{name:"question",color:"text",size:"small",noWrapper:!0,tooltip:"You can only restart specific items."}))),xe=(0,o.memo)((()=>(0,c.jsxs)(r.Flex,{gap:2,children:[(0,c.jsx)(r.TextBig,{children:"None of the selected items can be restarted."}),(0,c.jsx)(ge,{})]}))),me=(0,o.memo)((e=>{let{canDoAction:t,noAction:n}=e;return(0,c.jsxs)(c.Fragment,{children:[n.length?(0,c.jsxs)(r.Flex,{gap:2,children:[(0,c.jsxs)(r.TextBig,{color:"warning",children:[n.length," of the selected items cannot be restarted."]}),(0,c.jsx)(ge,{})]}):null,(0,c.jsx)(R,{items:[...n,...t],renderItem:e=>(0,c.jsx)(oe,{...e,noActionMessage:"Cannot be restarted."}),tooltipOnCollapsed:"Show items.",itemsContainerProps:{padding:[2]}})]})})),pe=e=>{let{canDoAction:t,noAction:n}=e;return t.length?(0,c.jsxs)(r.Flex,{column:!0,gap:2,children:[(0,c.jsxs)(r.TextBig,{children:["You are going to restart ",(0,c.jsxs)(r.TextBig,{strong:!0,children:[t.length," items"]}),"."]}),(0,c.jsx)(me,{canDoAction:t,noAction:n}),(0,c.jsx)(r.TextBig,{children:"Are you sure that you want to continue?"})]}):(0,c.jsx)(xe,{})},be=e=>{let{node:t,items:n,list:o,resetSelectedItems:r,isDisabled:s}=e;const l=(0,x.nM)({node:t});return(0,c.jsx)(te,{cmd:"restart",action:l,items:n,list:o,resetSelectedItems:r,isDisabled:s,actionIconProps:{icon:"refresh",tooltip:"Restart selected items",payload:{label:"Restart"}},confirmationDialogProps:{title:"Restart selected items?",noActionTitle:"No items to restart",confirmLabel:"Yes, restart",isConfirmPositive:!0,renderConfirmationMessage:pe},progressModalProps:{renderAllSuccess:e=>(0,c.jsx)(K,{...e,actionVerb:he}),renderAllFail:e=>(0,c.jsx)(U,{...e,actionVerb:he}),renderPartialFail:e=>(0,c.jsx)(Q,{...e,actionVerb:he})}})},fe=e=>{let{actionVerb:t}=e;return(0,c.jsxs)(r.TextBig,{children:["None of the selected items can be ",t,"."]})},je=e=>{let{canDoAction:t,noAction:n,isDisable:o}=e;const s=o?"disabled":"enabled";return(0,c.jsxs)(c.Fragment,{children:[n.length?(0,c.jsxs)(r.TextBig,{color:"warning",children:[n.length," of the selected items cannot be ",s,"."]}):null,(0,c.jsx)(R,{items:[...n,...t],renderItem:e=>(0,c.jsx)(oe,{...e,noActionMessage:`Cannot be ${s}.`}),tooltipOnCollapsed:"Show items.",itemsContainerProps:{padding:[2]}})]})},ye=e=>t=>{let{canDoAction:n,noAction:o}=t;const s=e?"disable":"enable",l=e?"disabled":"enabled";return n.length?(0,c.jsxs)(r.Flex,{column:!0,gap:2,children:[(0,c.jsxs)(r.TextBig,{children:["You are going to ",s," ",(0,c.jsxs)(r.TextBig,{strong:!0,children:[n.length," items"]}),"."]}),(0,c.jsx)(je,{canDoAction:n,noAction:o,isDisable:e}),(0,c.jsx)(r.TextBig,{children:"Are you sure that you want to continue?"})]}):(0,c.jsx)(fe,{actionVerb:l})},Ce=e=>{let{isDisable:t,node:n,items:r,list:s,resetSelectedItems:l,isDisabled:i}=e;const a=(0,x.Ht)({disable:t,node:n}),d=t?"disabled":"enabled",u=(0,o.useMemo)((()=>({icon:"switch_off",danger:t,...t?{iconColor:"errorText",tooltip:"Disable selected items",payload:{label:"Disable"}}:{iconColor:"successText",tooltip:"Enable selected items",payload:{label:"Enable"}}})),[t]),h=(0,o.useMemo)((()=>({isConfirmPositive:!t,renderConfirmationMessage:ye(t),...t?{title:"Disable selected items?",noActionTitle:"No items to disable",confirmLabel:"Yes, disable"}:{title:"Enable selected items?",noActionTitle:"No items to enable",confirmLabel:"Yes, enable"}})),[t,ye]);return(0,c.jsx)(te,{cmd:t?"disable":"enable",action:a,items:r,list:s,resetSelectedItems:l,isDisabled:i,actionIconProps:u,confirmationDialogProps:h,progressModalProps:{renderAllSuccess:e=>(0,c.jsx)(K,{...e,actionVerb:d}),renderAllFail:e=>(0,c.jsx)(U,{...e,actionVerb:d}),renderPartialFail:e=>(0,c.jsx)(Q,{...e,actionVerb:d})}})},Ae=e=>{let{node:t,path:n,list:o}=e;const{items:s,reset:l}=(0,x.H2)({node:t,path:n}),i=!s.length;return(0,c.jsxs)(O.r,{"data-testid":"dyncfg-selected-items-container",gap:2,alignItems:"center",padding:[0,0,0,3],children:[(0,c.jsx)(L,{isDisabled:i,onClick:l}),(0,c.jsxs)(r.TextBig,{color:i?"textLite":"text",children:[s.length," selected"]}),(0,c.jsxs)(r.Flex,{alignItems:"center",children:[(0,c.jsx)(be,{node:t,items:s,list:o,resetSelectedItems:l,isDisabled:i}),(0,c.jsx)(de,{node:t,items:s,list:o,resetSelectedItems:l,isDisabled:i}),(0,c.jsx)(Ce,{node:t,items:s,list:o,resetSelectedItems:l,isDisabled:i}),(0,c.jsx)(Ce,{isDisable:!0,node:t,items:s,list:o,resetSelectedItems:l,isDisabled:i})]})]})},ve=()=>{const e=(0,x.Hj)();return(0,c.jsx)(f.A,{align:"bottom",content:"Reload",children:(0,c.jsx)(r.Flex,{children:(0,c.jsx)(r.Button,{flavour:"hollow",icon:"refresh",onClick:e})})})},Ie=(0,o.memo)(ve);var ke=n(7960),we=(n(25509),n(65223),n(60321),n(41927),n(11632),n(64377),n(66771),n(12516),n(68931),n(52514),n(35694),n(52774),n(49536),n(21926),n(94483),n(16215),n(73700)),Fe=n(57530),Se=n(51220),Te=n(73980),De=n(15505);const Ne=e=>{let{id:t,entry:n,filteredEntriesIds:r,rowVirtualizer:s,virtualRow:l,isActiveSticky:i,level:a,renderChildren:d}=e;const{templateChildren:u,stickyIndex:h,...g}=n||{},x=(0,o.useMemo)((()=>u?Object.entries(u).reduce(((e,t)=>{let[n,o]=t;return{...e,...r.includes(n)?{[n]:o}:{}}}),{}):u),[u,r]),m={...(0,De.bn)(g),templateChildren:u,filteredTemplateChildren:x},p=(0,o.useMemo)((()=>({width:"100%",overflow:"hidden",...i&&null!==h&&!isNaN(h)?{position:"sticky",top:h*l.size,zIndex:10}:{position:"absolute",top:0,left:0,transform:`translateY(${l.start}px)`}})),[i,h]);return s&&l?(0,c.jsx)("div",{className:"dyncfg-virtual-row",style:p,ref:s.measureElement,"data-index":l.index,"data-key":t,"data-id":n.id,children:(0,c.jsx)(Te.A,{flavour:"path"!==n.type?"entity":"root"===n.type?"path":n.type,title:t,entityProps:m,level:a,entry:n,renderChildren:d})},l.key):null},Be=(0,y.default)(r.Flex).attrs((e=>({width:"100%",height:`${v.FL}px`,position:"absolute",top:0,left:0,alignItems:"center",padding:[0,6,0,12],border:{side:"all",color:"border"},style:{transform:`translateY(${e.offset*v.FL}px)`},...e}))).withConfig({displayName:"placeholder__StyledPlaceholderContainer",componentId:"sc-1lr4vg8-0"})([""]),Pe=(0,y.default)(r.Flex).attrs((e=>({width:"100px",height:"10px",round:"5px",...e}))).withConfig({displayName:"placeholder__Shimmer",componentId:"sc-1lr4vg8-1"})(["@keyframes shimmer{to{background-position-x:0%;}}background:linear-gradient( -45deg,"," 40%,"," 50%,"," 60% );background-size:300%;background-position-x:100%;animation:shimmer 1s infinite linear;"],(0,r.getColor)("border"),(0,r.getColor)("generic"),(0,r.getColor)("border")),Me=e=>{let{index:t,overscan:n=0,isBefore:o}=e;const s=o?t:t+n+1;return(0,c.jsxs)(Be,{justifyContent:"between",offset:s,"data-testid":"dyncfg-config-iyem-placeholder",children:[(0,c.jsxs)(r.Flex,{gap:2,children:[(0,c.jsx)(Pe,{width:"30px"}),(0,c.jsx)(Pe,{width:"240px"})]}),(0,c.jsxs)(r.Flex,{gap:2,children:[(0,c.jsx)(Pe,{width:"30px"}),(0,c.jsx)(Pe,{width:"30px"})]})]})},_e=(0,o.memo)(Me);var Ee=n(65637),Oe=n(83386);const ze=e=>{let{entries:t=[],rowHeight:n=v.FL}=e;const r=(0,o.useRef)(),l=(0,o.useRef)(),{node:i}=(0,s.Z)(),{path:a}=(0,Ee.A)(i),[d,u]=(0,x._F)({node:i,path:a}),h=(0,o.useMemo)((()=>t.reduce(((e,t)=>{let{isSticky:n,index:o}=t;return[...e,...n?[o]:[]]}),[])),[t]),g=(0,o.useCallback)((e=>(l.current||[]).includes(e)),[l.current]),m=(0,o.useCallback)((e=>{l.current=[...h].filter((t=>e.startIndex+h.indexOf(t)>=t));return[...new Set([...l.current||[],...(0,Fe.vp)(e)])].sort(((e,t)=>e-t))}),[l.current,h]),p=(0,o.useCallback)((()=>n),[n]),b=(0,Se.Te)({count:t.length,getScrollElement:()=>r.current,rangeExtractor:m,enableSmoothScroll:!0,estimateSize:p,overscan:5}),{startIndex:f,endIndex:j}=b.calculateRange()||{},{before:y,after:C}=(0,o.useMemo)((()=>{if(void 0===f||void 0===j)return{before:[],after:[]};const e=t.length;return{before:Array(f).fill().map(((e,t)=>t)),after:Array(e-j-1).fill().map(((e,t)=>t+j))}}),[f,j,t.length,5]),A=(0,o.useCallback)((0,we.n)(100,(e=>{u(e.target.scrollTop)})),[u]);return(0,o.useEffect)((()=>{r.current&&(r.current.scrollTop=d)}),[]),(0,c.jsx)("div",{ref:r,style:{height:"100%",width:"100%",overflow:"auto"},onScroll:A,children:(0,c.jsxs)("div",{style:{minHeight:`${b.getTotalSize()}px`,width:"100%",position:"relative"},children:[y.map((e=>(0,c.jsx)(_e,{index:e,isBefore:!0},e))),b.getVirtualItems().map((e=>{const n=t[e.index],{level:o=1}=n||{};return(0,c.jsx)(Ne,{id:n.id,entry:n,filteredEntriesIds:t.map((e=>{let{id:t}=e;return t})),rowVirtualizer:b,virtualRow:e,isActiveSticky:g(n.index),level:o,renderChildren:e=>(0,c.jsx)(Oe.A,{...n,...e})},e.key)})),C.map((e=>(0,c.jsx)(_e,{index:e,overscan:5},e)))]})})},Le=(0,ke.A)((()=>n.e(1658).then(n.bind(n,11658))),"DyncfgStyles"),Ve=e=>{let{list:t}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.Suspense,{fallback:"",children:(0,c.jsx)(Le,{})}),(0,c.jsx)(o.Suspense,{fallback:"",children:(0,c.jsx)(ze,{entries:t})})]})};var Ye=n(29022),$e=(n(72577),n(81391)),He=n(75669),Re=n(7761);const qe=(0,y.default)(r.Flex).attrs((e=>({column:!0,height:{max:"300px"},overflow:{vertical:"auto"},border:{side:"all",color:"border"},...e}))).withConfig({displayName:"parentNodes__ParentsList",componentId:"sc-hcj754-0"})([""]),We=(0,y.default)(r.Flex).attrs((e=>({padding:[2,3],cursor:"pointer",flex:1,...e}))).withConfig({displayName:"parentNodes__ParentItem",componentId:"sc-hcj754-1"})(["&:not(:last-of-type){border-bottom:1px solid ",";}&:hover{background-color:",";}"],(0,r.getColor)("border"),(0,r.getColor)("successSemi")),Ke=(0,a.A)(We),Ue="reachable",Qe=(0,o.memo)((e=>{let{nodes:t,nodesOptions:n,setNode:s}=e;const l=t?.[0],i=(0,$e.n)("id");(0,He.A)({roomId:i,polling:!1});const{loaded:a,nodes:d}=(0,Re.c8)(),u=(0,o.useMemo)((()=>a&&l?Object.entries(d||{}).find((e=>{let[t]=e;return t===l.id}))?.[1]?.parents:[]),[l,a,d]),h=(0,o.useCallback)((e=>{if(e.status===Ue){const t=n.find((t=>{let{value:n}=t;return n===e.id}));t&&s(t)}}),[s]);return a?u?.length?(0,c.jsxs)(r.Flex,{column:!0,gap:6,children:[(0,c.jsx)(r.TextBig,{children:"Please select one of the parent nodes to configure."}),(0,c.jsx)(qe,{children:u.filter((e=>{let{status:t}=e;return t===Ue})).map((e=>{let{id:t,hostname:n,status:o}=e;return(0,c.jsx)(Ke,{tooltip:`Select ${n}`,onClick:()=>h({id:t,hostname:n,status:o}),noWrapper:!0,children:(0,c.jsx)(r.TextBig,{color:"link",children:n})},t)}))})]}):null:(0,c.jsx)(r.TextBig,{children:"Loading parents..."})}));var Xe=n(60908);const Ge=r.TextBig,Je={[v.rd.ErrForbidden]:{title:"No permissions",Content:()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ge,{children:"You don't have permissions to view the configurations."}),(0,c.jsx)(Ge,{children:"Please contact the Space administrators if this is unexpected."})]})},[v.rd.ErrNoConfigurableNodes]:{title:"No configurable nodes found",Content:()=>(0,c.jsx)(Ge,{children:"We couldn't find any node that can be configured from the UI."})},[v.rd.ErrNoDyncfgComponent]:{title:"No Dynamic Configuration available",Content:()=>(0,c.jsx)(Ge,{children:"It appears no components that support this feature are currently running."})},[v.rd.ErrHealthDisabled]:{title:"Disabled Alerts",Content:()=>(0,c.jsx)(Ge,{children:"Alerts are disabled in this node."})},[v.rd.ErrDyncfgNotAvailable]:{title:"Dynamic Configuration not avaialble",Content:()=>(0,c.jsx)(Ge,{children:"This node cannot be configured from the UI."})},[v.rd.ErrAlertNotAvailable]:{title:"Alert not found",Content:()=>(0,c.jsx)(Ge,{children:"It seems that the requested alert is not available on this node."})},default:{title:"Error",Content:()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ge,{children:"Something went wrong, please check again later."}),(0,c.jsxs)(Ge,{children:["If the problem persists feel free to contact us with a"," ",(0,c.jsx)(k.A,{href:"https://github.com/netdata/netdata-cloud/issues/new/choose",target:"_blank",rel:"noopener noreferrer",children:"ticket"})]})]})}},Ze=e=>{let{nodes:t,nodesOptions:n,setNode:o,error:s}=e;const{errorMsgKey:l}=s||{},{title:i,Content:a}=Je[l]||Je.default;return(0,c.jsx)(Xe.DL,{feature:"DyncfgMainTabs",errorMsgKey:l,children:(0,c.jsx)(Ye.A,{title:i,children:(0,c.jsxs)(r.Flex,{column:!0,gap:2,children:[(0,c.jsx)(r.Flex,{column:!0,gap:1,children:(0,c.jsx)(a,{})}),(0,c.jsx)(Qe,{nodes:t,nodesOptions:n,setNode:o})]})})})};var et=n(62718),tt=n(45026);const nt=e=>{const{capabilities:t}=e||{},n=t?.dyncfg?.enabled,r=t?.health?.enabled,{title:s}=(0,tt.A)(),{state:l}=(0,x.$h)(),{isAlert:i}=l||{},{loaded:a,value:c}=(0,x.wd)({node:e}),d=a&&!Object.keys(c?.tree||{}).length,u=(0,o.useMemo)((()=>c?.tree?.[v.$7]?.[s]||{}),[c?.tree,s]),h=(0,o.useMemo)((()=>!!Object.keys(u||{}).length),[u]);return(0,o.useMemo)((()=>e?i&&!r?v.rd.ErrHealthDisabled:i&&!h?v.rd.ErrAlertNotAvailable:n?d?v.rd.ErrNoDyncfgComponent:null:v.rd.ErrDyncfgNotAvailable:null),[e,i,n,r,d])},ot=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{searchItem:t,testString:n,testProps:r}=p(),{ids:s}=(0,x.$K)();return(0,o.useMemo)((()=>{let t=0;return e.reduce(((e,o)=>{if(!n(o)||!r(o)||(o.parents||[]).some((e=>s.includes(e))))return e;const l="path"===o.type;return[...e,{...o,...l?{isSticky:l,stickyIndex:t++}:{}}]}),[]).map(((e,t)=>({...e,index:t})))}),[e,n,r,s,t])};var rt=n(98289);const st=e=>{let{selectedNode:t,setNode:n,options:s}=e;const{loaded:l,tabs:i,selectedTab:a,setSelectedTab:d}=(0,Ee.A)(t),u=nt(t),{reset:g}=(0,x.$K)(),{selectedSubTab:m,setSelectedSubTab:p}=(0,x.te)(),{loaded:f,value:j,hasError:y,error:C}=(0,x.wd)({node:t,path:i?.[a]?.value}),[A,v,I]=(0,o.useMemo)((()=>{const{tree:e}=j||{},t=(0,rt.m8)(e),{tabs:n,tree:o}=(0,rt.sr)(t),r=o[n[m]];return[e,n,(0,rt.Xt)({tree:r})]}),[j,m]),k=ot(I),w=(0,o.useCallback)((e=>{g(),d(e),p(0)}),[d,p,g]);return(0,c.jsxs)(r.Flex,{column:!0,height:"100%",overflow:"hidden",gap:4,children:[(0,c.jsxs)(r.Flex,{alignItems:"end",justifyContent:"between",children:[(0,c.jsxs)(r.Flex,{alignItems:"end",gap:4,children:[(0,c.jsx)(h,{node:t,setNode:n,options:s}),(0,c.jsx)(b,{}),(0,c.jsx)(Ae,{node:t,path:i[a]?.value,list:k})]}),(0,c.jsxs)(r.Flex,{alignItems:"center",gap:3,children:[(0,c.jsx)(E,{tree:A}),(0,c.jsx)(Ie,{})]})]}),l?u?(0,c.jsx)(Ze,{nodes:[t],nodesOptions:s,setNode:n,error:{errorMsgKey:u}}):(0,c.jsx)(r.Tabs,{height:"100%",overflow:"hidden",selected:a,onChange:w,tabsProps:{border:{side:"bottom",color:"border"}},children:i.map((e=>{let{label:n,value:o}=e;return(0,c.jsx)(r.Tab,{label:n,children:(0,c.jsx)(r.Tabs,{height:"100%",overflow:"hidden",selected:m,onChange:p,tabsProps:{border:{side:"bottom",color:"border"}},children:v.map((e=>(0,c.jsx)(r.Tab,{label:e,small:!0,children:(0,c.jsx)(r.Flex,{height:"100%",padding:[4,0,0],overflow:{vertical:"auto"},children:f?y?(0,c.jsx)(Ze,{error:C}):(0,c.jsx)(Ve,{list:k},`${o} ${t}`):(0,c.jsx)(et.Um,{})})},e)))})},o)}))}):(0,c.jsx)(et.Um,{})]})},lt=(0,o.memo)(st);var it=n(24609),at=n(64973),ct=n(58042),dt=n(28688),ut=n(21785),ht=n(41936),gt=n(38648),xt=n(3692);const mt=e=>{let{message:t,title:n,footer:o,...s}=e;const l=s?.["data-testid"]||"dyncfgError";return(0,c.jsxs)(r.Flex,{alignItems:"center",column:!0,"data-testid":l,flex:!0,gap:3,justifyContent:"center",padding:[0,20],...s,children:[(0,c.jsx)(r.H3,{"data-testid":`${l}-title`,children:n}),(0,c.jsx)(r.TextBig,{color:"textDescription","data-testid":`${l}-message`,children:t}),o]})};var pt=n(9381),bt=n(24013),ft=n(87083);const jt=(0,o.memo)((e=>{let{node:t}=e;const[n,o]=(0,x.Gt)(),r=(0,ft.a7)({extraKey:v.q4}),l=r?.[0],i=(0,bt.xY)(l);t=l?i:t;const{options:a,node:d,setNode:u}=(0,s.A)({selectedNode:t,nodes:n});return o?a.length?(0,c.jsx)(pt.A,{children:(0,c.jsx)(lt,{selectedNode:d,setNode:u,options:a})}):(0,c.jsx)(Ze,{error:{errorMsgKey:v.rd.ErrNoConfigurableNodes}}):(0,c.jsx)(et.l_,{})})),yt=e=>{const t=(0,ct.OS)();return(0,c.jsx)(r.Button,{label:"Get a fresh agent token",onClick:t,...e})},Ct="Configurations expose sensitive information about your systems and applications. To protect your privacy, Netdata exposes this information only to logged-in users and claimed agents. When viewing Configurations directly on a Netdata Agent UI, this information is sent directly from the Netdata Agent to your web browser, without exposing it to any third parties.",At={notLoggedIn:{title:"Sign in to Netdata to use Configurations",description:Ct,footer:(0,c.jsx)(gt.default,{})},notClaimed:{title:"Connect this agent to Netdata to use Configurations",description:Ct,footer:(0,c.jsx)(xt.A,{})},noAccess:{title:"This agent belongs to a Netdata Space you are not member of",description:Ct,footer:(0,c.jsx)(r.TextBig,{color:"textDescription",children:"Ask for an invitation from the administrators of the Netdata Space of the agent to use configurations."})},bearerError:{title:"You are not authorized to use Configurations",description:Ct,footer:(0,c.jsx)(yt,{})}},vt=e=>{let{node:t}=e;const n=(0,it.dg)();(0,dt.A)({polling:!1});const{refresh:r}=(0,x.$h)(),[,,s]=(0,x.zc)(),{refresh:l}=(0,x.te)(),[i]=(0,at.Q8)(),[{bearerProtection:a,error:d}]=(0,ct.f7)(),[{canBeClaimed:u,cloudStatus:h}]=(0,ht.RJ)();if((()=>{const e=(0,$e.n)("id");(0,ut.A)({roomId:e})})(),(0,o.useEffect)((()=>()=>{r(),s(),l()}),[r,s,l]),n&&d&&a){const{title:e,description:t,footer:n}=(e=>{let{userStatus:t,userNodeStatus:n,accessError:o,canBeClaimed:r}=e;return At[t]?At[t]:o?At.notLoggedIn:r?At.notClaimed:At[n]?At[n]:At.bearerError})({...i,bearerError:d,canBeClaimed:u,cloudStatus:h});return(0,c.jsx)(mt,{title:e,message:t,footer:n})}return(0,c.jsx)(jt,{node:t})}}}]);